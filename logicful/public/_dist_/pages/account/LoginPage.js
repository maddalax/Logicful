import"./LoginPage.css.proxy.js";import{SvelteComponent as _e,append as o,attr as l,check_outros as he,create_component as pe,destroy_component as fe,detach as _,element as n,group_outros as be,init as ke,insert as x,listen as z,mount_component as ge,prevent_default as xe,run_all as te,safe_not_equal as ye,set_data as Le,set_input_value as D,set_style as je,space as c,stop_propagation as Me,text as se,transition_in as Y,transition_out as Z}from"../../../web_modules/svelte/internal.js";import{postApi as He}from"../../services/ApiService.js";import{setToken as Te}from"../../services/AuthService.js";import{afterUpdate as Ce,onMount as Pe}from"../../../web_modules/svelte.js";import"../../components/layout/logos/LogoDark.js";import"../../components/Link.js";import"../../../web_modules/svelte-routing.js";import we from"../../components/Button.js";function ve(r){let e,t,s,a,u,i,m,p;return{c(){e=n("div"),t=n("div"),s=n("div"),a=n("div"),u=n("div"),i=n("p"),m=n("span"),p=se(r[5]),l(i,"class","ml-3 font-medium text-white truncate"),l(u,"class","w-0 flex-1 flex items-center"),l(a,"class","flex items-center justify-between flex-wrap"),l(s,"class","p-2 rounded-md bg-red-600 shadow-lg sm:p-2"),l(t,"class","max-w-screen-xl mx-auto px-2 sm:px-6 lg:px-8"),l(e,"class","inset-x-0 pt-2 mb-3")},m(f,h){x(f,e,h),o(e,t),o(t,s),o(s,a),o(a,u),o(u,i),o(i,m),o(m,p)},p(f,h){h&32&&Le(p,f[5])},d(f){f&&_(e)}}}function Se(r){let e,t,s,a,u;return{c(){e=n("input"),t=c(),s=n("div"),s.innerHTML='<svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>',l(e,"id","password"),l(e,"type","password"),l(e,"minlength","5"),e.required=!0,l(e,"autocomplete","current-password"),l(e,"class","form-input block w-full pl-10 sm:text-sm sm:leading-5"),l(s,"class",`absolute inset-y-0 right-0 pr-3 flex items-center
                    cursor-pointer`)},m(i,m){x(i,e,m),D(e,r[1]),x(i,t,m),x(i,s,m),a||(u=[z(e,"input",r[10]),z(s,"click",r[7])],a=!0)},p(i,m){m&2&&e.value!==i[1]&&D(e,i[1])},d(i){i&&_(e),i&&_(t),i&&_(s),a=!1,te(u)}}}function Be(r){let e,t,s,a,u;return{c(){e=n("input"),t=c(),s=n("div"),s.innerHTML='<svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg>',l(e,"id","password"),l(e,"type","text"),l(e,"minlength","5"),e.required=!0,l(e,"autocomplete","current-password"),l(e,"class","form-input block w-full pl-10 sm:text-sm sm:leading-5"),l(s,"class",`absolute inset-y-0 right-0 pr-3 flex items-center
                    cursor-pointer`)},m(i,m){x(i,e,m),D(e,r[1]),x(i,t,m),x(i,s,m),a||(u=[z(e,"input",r[9]),z(s,"click",r[7])],a=!0)},p(i,m){m&2&&e.value!==i[1]&&D(e,i[1])},d(i){i&&_(e),i&&_(t),i&&_(s),a=!1,te(u)}}}function Ae(r){let e,t;return e=new we({props:{type:"primary",width:"full",disabled:!0,$$slots:{default:[Ie]},$$scope:{ctx:r}}}),{c(){pe(e.$$.fragment)},m(s,a){ge(e,s,a),t=!0},i(s){if(t)return;Y(e.$$.fragment,s),t=!0},o(s){Z(e.$$.fragment,s),t=!1},d(s){fe(e,s)}}}function ze(r){let e,t;return e=new we({props:{type:"primary",width:"full",submit:!0,$$slots:{default:[Ve]},$$scope:{ctx:r}}}),{c(){pe(e.$$.fragment)},m(s,a){ge(e,s,a),t=!0},i(s){if(t)return;Y(e.$$.fragment,s),t=!0},o(s){Z(e.$$.fragment,s),t=!1},d(s){fe(e,s)}}}function Ie(r){let e;return{c(){e=se("Signing In...")},m(t,s){x(t,e,s)},d(t){t&&_(e)}}}function Ve(r){let e;return{c(){e=se("Sign In With Email")},m(t,s){x(t,e,s)},d(t){t&&_(e)}}}function Ge(r){let e,t,s,a,u,i,m,p,f,h,C,W,j,P,U,g,S,J,M,I,V,w,H,G,E,le,B,K,oe,ne,q,F,T,ie,O,re,N,ae,R,b,y,Q,$,ue,v=r[5]&&ve(r);function de(d,k){return d[3]?Be:Se}let X=de(r,-1),L=X(r);const me=[ze,Ae],A=[];function ce(d,k){return d[4]?1:0}return b=ce(r,-1),y=A[b]=me[b](r),{c(){e=n("meta"),t=n("script"),a=c(),u=n("div"),i=n("div"),i.innerHTML=`<img class="mx-auto h-12 w-auto" src="https://tailwindui.com/img/logos/workflow-mark-on-white.svg" alt="Workflow"/> 
    <h2 class="mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900">Sign in to our platform</h2> 
    <p class="mt-2 text-center text-sm leading-5 text-gray-600 max-w">Or <a href="/account/register" class="font-medium text-indigo-600
          hover:text-indigo-500 focus:outline-none focus:underline transition
          ease-in-out duration-150">Sign up</a></p>`,m=c(),p=n("div"),v&&v.c(),f=c(),h=n("div"),C=n("div"),C.innerHTML='<div class="g-signin2" data-longtitle="true" data-theme="dark" data-height="50" data-width="365" data-onsuccess="onGoogleSignIn"></div>',W=c(),j=n("div"),P=n("div"),P.innerHTML=`<div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div> 
          <div class="relative flex justify-center text-sm leading-5"><span class="px-2 bg-white text-gray-500">Or</span></div>`,U=c(),g=n("form"),S=n("label"),S.textContent="Email",J=c(),M=n("div"),I=n("div"),I.innerHTML='<svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg>',V=c(),w=n("input"),H=c(),G=n("div"),E=n("label"),E.textContent="Password",le=c(),B=n("div"),K=n("div"),K.innerHTML='<svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg>',oe=c(),L.c(),ne=c(),q=n("div"),F=n("div"),T=n("input"),ie=c(),O=n("label"),O.textContent="Remember me",re=c(),N=n("div"),N.innerHTML=`<a href="/account/forgot" class="font-medium text-indigo-600 hover:text-indigo-500
                  focus:outline-none focus:underline transition ease-in-out
                  duration-150">Forgot your password?</a>`,ae=c(),R=n("div"),y.c(),l(e,"name","google-signin-client_id"),l(e,"content","807768276065-c8b2jvlks20jgm0mk3t2akfm7pc3jomu.apps.googleusercontent.com"),t.src!==(s="https://apis.google.com/js/platform.js")&&l(t,"src",s),t.async=!0,t.defer=!0,l(i,"class","sm:mx-auto sm:w-full sm:max-w-md"),je(C,"margin-bottom","1em"),l(P,"class","relative"),l(S,"for","email"),l(S,"class","block text-sm font-medium leading-5 text-gray-700"),l(I,"class",`absolute inset-y-0 left-0 pl-3 flex items-center
                pointer-events-none`),l(w,"id","email"),l(w,"autocomplete","email"),l(w,"type","email"),l(w,"class","form-input block w-full pl-10 sm:text-sm sm:leading-5"),l(M,"class","mt-1 relative rounded-md shadow-sm"),l(E,"for","password"),l(E,"class","block text-sm font-medium leading-5 text-gray-700"),l(K,"class",`absolute inset-y-0 left-0 pl-3 flex items-center
                  pointer-events-none`),l(B,"class","mt-1 relative rounded-md shadow-sm"),l(G,"class","mt-2"),l(T,"id","remember_me"),l(T,"type","checkbox"),l(T,"class",`form-checkbox h-4 w-4 text-indigo-600 transition
                  duration-150 ease-in-out`),l(O,"for","remember_me"),l(O,"class","ml-2 block text-sm leading-5 text-gray-900"),l(F,"class","flex items-center"),l(N,"class","text-sm leading-5"),l(q,"class","mt-6 flex items-center justify-between"),l(R,"class","mt-5"),l(j,"class","mt-6"),l(h,"class","bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10 mt-3"),l(p,"class","sm:mx-auto sm:w-full sm:max-w-md"),l(u,"class",`min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6
    lg:px-8`)},m(d,k){o(document.head,e),o(document.head,t),x(d,a,k),x(d,u,k),o(u,i),o(u,m),o(u,p),v&&v.m(p,null),o(p,f),o(p,h),o(h,C),o(h,W),o(h,j),o(j,P),o(j,U),o(j,g),o(g,S),o(g,J),o(g,M),o(M,I),o(M,V),o(M,w),D(w,r[0]),o(g,H),o(g,G),o(G,E),o(G,le),o(G,B),o(B,K),o(B,oe),L.m(B,null),o(g,ne),o(g,q),o(q,F),o(F,T),T.checked=r[2],o(F,ie),o(F,O),o(q,re),o(q,N),o(g,ae),o(g,R),A[b].m(R,null),Q=!0,$||(ue=[z(w,"input",r[8]),z(T,"change",r[11]),z(g,"submit",Me(xe(r[6])))],$=!0)},p(d,[k]){d[5]?v?v.p(d,k):(v=ve(d),v.c(),v.m(p,f)):v&&(v.d(1),v=null),k&1&&w.value!==d[0]&&D(w,d[0]),X===(X=de(d,k))&&L?L.p(d,k):(L.d(1),L=X(d),L&&(L.c(),L.m(B,null))),k&4&&(T.checked=d[2]);let ee=b;b=ce(d,k),b!==ee&&(be(),Z(A[ee],1,1,()=>{A[ee]=null}),he(),y=A[b],y||(y=A[b]=me[b](d),y.c()),Y(y,1),y.m(R,null))},i(d){if(Q)return;Y(y),Q=!0},o(d){Z(y),Q=!1},d(d){_(e),_(t),d&&_(a),d&&_(u),v&&v.d(),L.d(),A[b].d(),$=!1,te(ue)}}}function qe(r,e,t){let s="",a="",u=!0,i=!1,m=!1,p=!1,f="",h=!1,C="";Pe(()=>{window.onGoogleSignIn=V=>{h=!0;const w=V.getAuthResponse().id_token;C=w,W()}});async function W(){t(2,u=!0),await P("user/login/google",{token:C})}async function j(){t(5,f=""),t(4,p=!0),t(0,s=s.trim().toLowerCase()),await P("user/login",{email:s,password:a})}async function P(V,w){try{const H=await He(V,w);H.token?(Te(H,u),window.location.replace("/")):t(5,f="Failed to login, unknown response from server.")}catch(H){H.message==="invalid username or password"?t(5,f="Invalid username or password."):(console.error(H),t(5,f="Failed to login, something went wrong."))}finally{t(4,p=!1)}}Ce(()=>{i=U()});function U(){return s!=""&&a!=""}function g(){t(3,m=!m)}function S(){s=this.value,t(0,s)}function J(){a=this.value,t(1,a)}function M(){a=this.value,t(1,a)}function I(){u=this.checked,t(2,u)}return[s,a,u,m,p,f,j,g,S,J,M,I]}class Fe extends _e{constructor(r){super();ke(this,r,qe,Ge,ye,{})}}export default Fe;
