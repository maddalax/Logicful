import{getToken as p}from"./AuthService.js";async function s(){const t=await p();return t?{Authorization:"Bearer "+t}:void 0}export function apiEndpoint(){return window.location.host==="localhost:5000"?"http://localhost:3000/api/":"/api/"}export async function getApi(t){const n=apiEndpoint(),e=await fetch(`${n}${t}`,{headers:await s()});if(!e.ok){const o=await e.json();throw new Error(o.message)}const r=await e.json();return r}export async function postApi(t,n){return await i("POST",t,n)}export async function putApi(t,n){return await i("PUT",t,n)}export async function deleteApi(t,n){return await i("DELETE",t,n)}async function i(t,n,e){const r=apiEndpoint();try{const o=await fetch(`${r}${n}`,{method:t,headers:{"Content-Type":"application/json",...await s()},body:JSON.stringify(e)});if(console.log(o),!o.ok){const c=await o.json();throw new Error(c.message)}const a=await o.text();return a===null||a===""?{}:JSON.parse(a)}catch(o){throw o}}
