import{SvelteComponent as S,append as g,attr as u,bubble as k,check_outros as M,create_component as F,destroy_component as H,detach as m,element as c,group_outros as I,init as U,insert as _,is_function as w,listen as v,mount_component as q,run_all as T,safe_not_equal as D,space as C,stop_propagation as y,transition_in as b,transition_out as h}from"../../web_modules/svelte/internal.js";import{subscribeFieldChange as E}from"../event/FieldEvent.js";import V from"./Label.js";import{onMount as j}from"../../web_modules/svelte.js";import L from"../store/FormStore.js";import{debounce as z}from"../util/Debounce.js";function O(l){let e,n;return e=new V({props:{field:l[0]}}),{c(){F(e.$$.fragment)},m(t,f){q(e,t,f),n=!0},p(t,f){const a={};f&1&&(a.field=t[0]),e.$set(a)},i(t){if(n)return;b(e.$$.fragment,t),n=!0},o(t){h(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function A(l){let e,n,t,f,a,s,d;return{c(){e=c("input"),u(e,"class",n=l[0].properties?.className??"form-input block w-full sm:text-sm sm:leading-5"),u(e,"id",t=l[0].id),e.value=l[1],u(e,"placeholder",f=l[0].placeholder??""),u(e,"name",a=l[0].name),u(e,"type",l[2])},m(o,i){_(o,e,i),s||(d=[v(e,"click",y(l[5])),v(e,"input",function(){w(l[3])&&l[3].apply(this,arguments)})],s=!0)},p(o,i){l=o,i&1&&n!==(n=l[0].properties?.className??"form-input block w-full sm:text-sm sm:leading-5")&&u(e,"class",n),i&1&&t!==(t=l[0].id)&&u(e,"id",t),i&2&&e.value!==l[1]&&(e.value=l[1]),i&1&&f!==(f=l[0].placeholder??"")&&u(e,"placeholder",f),i&1&&a!==(a=l[0].name)&&u(e,"name",a),i&4&&u(e,"type",l[2])},d(o){o&&m(e),s=!1,T(d)}}}function B(l){let e,n,t,f,a,s,d,o;return{c(){e=c("textarea"),u(e,"rows",n=l[0].rows),u(e,"class",t=l[0].properties?.className??"form-textarea block w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5"),u(e,"id",f=l[0].id),e.value=l[1],u(e,"placeholder",a=l[0].placeholder??""),u(e,"name",s=l[0].name),u(e,"type",l[2])},m(i,r){_(i,e,r),d||(o=[v(e,"click",y(l[4])),v(e,"input",function(){w(l[3])&&l[3].apply(this,arguments)})],d=!0)},p(i,r){l=i,r&1&&n!==(n=l[0].rows)&&u(e,"rows",n),r&1&&t!==(t=l[0].properties?.className??"form-textarea block w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5")&&u(e,"class",t),r&1&&f!==(f=l[0].id)&&u(e,"id",f),r&2&&(e.value=l[1]),r&1&&a!==(a=l[0].placeholder??"")&&u(e,"placeholder",a),r&1&&s!==(s=l[0].name)&&u(e,"name",s),r&4&&u(e,"type",l[2])},d(i){i&&m(e),d=!1,T(o)}}}function N(l){let e,n=(l[0].helperText??"")+"";return{c(){e=c("p"),u(e,"class","mt-2 text-sm text-gray-500")},m(t,f){_(t,e,f),e.innerHTML=n},p(t,f){f&1&&n!==(n=(t[0].helperText??"")+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function G(l){let e,n,t,f,a=!l[0].hideLabel&&O(l);function s(r,p){return r[0].rows&&r[0].rows>1?B:A}let d=s(l,-1),o=d(l),i=l[0].helperText&&N(l);return{c(){e=c("div"),a&&a.c(),n=C(),o.c(),t=C(),i&&i.c(),u(e,"class","form-group")},m(r,p){_(r,e,p),a&&a.m(e,null),g(e,n),o.m(e,null),g(e,t),i&&i.m(e,null),f=!0},p(r,[p]){r[0].hideLabel?a&&(I(),h(a,1,1,()=>{a=null}),M()):a?(a.p(r,p),p&1&&b(a,1)):(a=O(r),a.c(),b(a,1),a.m(e,n)),d===(d=s(r,p))&&o?o.p(r,p):(o.d(1),o=d(r),o&&(o.c(),o.m(e,t))),r[0].helperText?i?i.p(r,p):(i=N(r),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i(r){if(f)return;b(a),f=!0},o(r){h(a),f=!1},d(r){r&&m(e),a&&a.d(),o.d(),i&&i.d()}}}function J(l,e,n){let{field:t}=e,{value:f=""}=e,{type:a="text"}=e,s;E(j,i=>{i.id===t.id&&n(1,f=i.value??f??"")}),j(()=>{n(3,s=z(i=>{n(0,t.value=i.target.value??"",t),L.set(t,{fromUser:!0,field:"value",value:t.value}),t.onChange?.(t.value)},500)),n(1,f=t.value??L.getValue(t.configTarget??t.id)??"")});function d(i){k(l,i)}function o(i){k(l,i)}return l.$$set=i=>{"field"in i&&n(0,t=i.field),"value"in i&&n(1,f=i.value),"type"in i&&n(2,a=i.type)},[t,f,a,s,d,o]}class K extends S{constructor(l){super();U(this,l,J,G,D,{field:0,value:1,type:2})}}export default K;
