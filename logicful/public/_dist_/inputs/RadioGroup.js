import{SvelteComponent as A,append as c,attr as s,bubble as N,check_outros as B,create_component as H,destroy_component as I,destroy_each as J,detach as C,element as m,empty as F,group_outros as K,init as Q,insert as O,listen as j,mount_component as W,run_all as G,safe_not_equal as X,set_data as Y,space as T,stop_propagation as R,text as q,transition_in as w,transition_out as U}from"../../web_modules/svelte/internal.js";import{subscribeFieldChange as Z}from"../event/FieldEvent.js";import y from"./Label.js";import{onMount as D}from"../../web_modules/svelte.js";import L from"../store/FormStore.js";import{debounce as x}from"../util/Debounce.js";function E(n,r,t){const o=n.slice();return o[14]=r[t],o}function M(n){let r,t;return r=new y({props:{field:n[0],type:"inline"}}),{c(){H(r.$$.fragment)},m(o,e){W(r,o,e),t=!0},p(o,e){const l={};e&1&&(l.field=o[0]),r.$set(l)},i(o){if(t)return;w(r.$$.fragment,o),t=!0},o(o){U(r.$$.fragment,o),t=!1},d(o){I(r,o)}}}function P(n){let r,t,o=n[0].options,e=[];for(let i=0;i<o.length;i+=1)e[i]=V(E(n,o,i));let l=n[0].includeOther&&z(n);return{c(){for(let i=0;i<e.length;i+=1)e[i].c();r=T(),l&&l.c(),t=F()},m(i,u){for(let d=0;d<e.length;d+=1)e[d].m(i,u);O(i,r,u),l&&l.m(i,u),O(i,t,u)},p(i,u){if(u&97){o=i[0].options;let d;for(d=0;d<o.length;d+=1){const h=E(i,o,d);e[d]?e[d].p(h,u):(e[d]=V(h),e[d].c(),e[d].m(r.parentNode,r))}for(;d<e.length;d+=1)e[d].d(1);e.length=o.length}i[0].includeOther?l?l.p(i,u):(l=z(i),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(i){J(e,i),i&&C(r),l&&l.d(i),i&&C(t)}}}function V(n){let r,t,o,e,l,i,u,d,h,p=n[14]+"",k,v,a,g;function S(...b){return n[11](n[14],...b)}return{c(){r=m("div"),t=m("div"),o=m("div"),e=m("input"),u=T(),d=m("div"),h=m("label"),k=q(p),s(e,"class",`form-radio h-4 w-4 text-indigo-600 transition duration-150
              ease-in-out`),s(e,"type","radio"),e.value="",e.checked=l=n[6](n[14]),s(e,"id",i=`${n[0].id}-${n[14]}`),s(o,"class","flex items-center h-5"),s(h,"for",v=`${n[0].id}-${n[14]}`),s(h,"class","font-medium text-gray-700"),s(d,"class","ml-3 text-sm leading-5"),s(t,"class","relative flex items-start"),s(r,"class","mt-4")},m(b,f){O(b,r,f),c(r,t),c(t,o),c(o,e),c(t,u),c(t,d),c(d,h),c(h,k),a||(g=[j(e,"click",R(n[10])),j(e,"change",S)],a=!0)},p(b,f){n=b,f&1&&l!==(l=n[6](n[14]))&&(e.checked=l),f&1&&i!==(i=`${n[0].id}-${n[14]}`)&&s(e,"id",i),f&1&&p!==(p=n[14]+"")&&Y(k,p),f&1&&v!==(v=`${n[0].id}-${n[14]}`)&&s(h,"for",v)},d(b){b&&C(r),a=!1,G(g)}}}function z(n){let r,t,o,e,l,i,u,d,h,p,k,v,a,g,S,b;return{c(){r=m("div"),t=m("div"),o=m("div"),e=m("input"),i=T(),u=m("div"),d=m("label"),h=q("Other:"),k=T(),v=m("div"),a=m("input"),s(e,"class",`form-radio h-4 w-4 text-indigo-600 transition duration-150
              ease-in-out`),s(e,"type","radio"),e.value="",e.checked=n[2],s(e,"id",l=`${n[0].id}-other`),s(o,"class","flex items-center h-5"),s(d,"for",p=`${n[0].id}-other`),s(d,"class","font-medium text-gray-700"),s(u,"class","ml-3 text-sm leading-5"),s(t,"class","relative flex items-start"),s(r,"class","mt-4"),s(a,"class","form-input block w-full sm:text-sm sm:leading-5"),s(a,"type","text"),a.value=n[1],s(a,"id",g=`${n[0].id}-other`),s(v,"class","mt-4")},m(f,_){O(f,r,_),c(r,t),c(t,o),c(o,e),c(t,i),c(t,u),c(u,d),c(d,h),O(f,k,_),O(f,v,_),c(v,a),S||(b=[j(e,"click",R(n[9])),j(e,"click",n[4]),j(a,"click",R(n[8])),j(a,"input",n[12])],S=!0)},p(f,_){_&4&&(e.checked=f[2]),_&1&&l!==(l=`${f[0].id}-other`)&&s(e,"id",l),_&1&&p!==(p=`${f[0].id}-other`)&&s(d,"for",p),_&2&&a.value!==f[1]&&(a.value=f[1]),_&1&&g!==(g=`${f[0].id}-other`)&&s(a,"id",g)},d(f){f&&C(r),f&&C(k),f&&C(v),S=!1,G(b)}}}function $(n){let r,t,o,e=!n[0].hideLabel&&M(n),l=n[0].options&&P(n);return{c(){e&&e.c(),r=T(),l&&l.c(),t=F()},m(i,u){e&&e.m(i,u),O(i,r,u),l&&l.m(i,u),O(i,t,u),o=!0},p(i,[u]){i[0].hideLabel?e&&(K(),U(e,1,1,()=>{e=null}),B()):e?(e.p(i,u),u&1&&w(e,1)):(e=M(i),e.c(),w(e,1),e.m(r.parentNode,r)),i[0].options?l?l.p(i,u):(l=P(i),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i(i){if(o)return;w(e),o=!0},o(i){U(e),o=!1},d(i){e&&e.d(i),i&&C(r),l&&l.d(i),i&&C(t)}}}function ee(n,r,t){let{field:o}=r,{value:e={}}=r,l="",i,u=!1;Z(D,f=>{if(f.id===o.id){if(t(7,e=f.value??{}),l&&!e.other)return;t(1,l=e.other??"")}}),D(()=>{i=x(f=>{L.set(f,{fromUser:!0,field:"value",value:f.value})},500),t(7,e=L.getValue(o.configTarget??o.id)??{}),t(1,l=e.other??""),t(2,u=l!=null&&l!="")});function d(f){t(1,l=f.target.value),t(7,e={}),l!=""&&l!=null&&t(7,e.other=l,e),t(0,o.value=e,o),i(o)}function h(){t(2,u=!0),t(7,e={other:l}),t(0,o.value=e,o),L.set(o,{fromUser:!0,field:"value",value:o.value})}function p(f,_){f.stopPropagation(),t(7,e={}),t(7,e[_]=_,e),t(2,u=!1),t(0,o.value=e,o),L.set(o,{fromUser:!0,field:"value",value:o.value})}function k(f){return e[f]!=null&&e[f]!=""}function v(f){N(n,f)}function a(f){N(n,f)}function g(f){N(n,f)}const S=(f,_)=>p(_,f),b=f=>d(f);return n.$$set=f=>{"field"in f&&t(0,o=f.field),"value"in f&&t(7,e=f.value)},[o,l,u,d,h,p,k,e,v,a,g,S,b]}class le extends A{constructor(n){super();Q(this,n,ee,$,X,{field:0,value:7})}}export default le;
