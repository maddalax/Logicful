import{SvelteComponent as v,append as b,binding_callbacks as h,detach as _,element as a,init as w,insert as C,noop as d,safe_not_equal as j}from"../../web_modules/svelte/internal.js";import{subscribeFieldChange as p}from"../event/FieldEvent.js";import{onMount as f}from"../../web_modules/svelte.js";import c from"../store/FormStore.js";function q(o){let i,t;return{c(){i=a("div"),t=a("div")},m(l,n){C(l,i,n),b(i,t),o[4](t)},p:d,i:d,o:d,d(l){l&&_(i),o[4](null)}}}function x(o,i,t){let l,{field:n}=i,{value:r={blocks:[]}}=i,{onChange:s}=i,T;function y(e){s?.(e)}p(f,e=>{e.id===n.id&&t(2,r=e.value??"")}),f(async()=>{import("../../web_modules/quill/dist/quill.js"),import("../../web_modules/quill/dist/quill.snow.css.proxy.js");const e=(await import("../../web_modules/quill.js")).default;t(2,r=c.getValue(n.configTarget??n.id)??"");var g=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{header:[1,2,3,4,5,6,!1]},{color:[]},{align:[]}],["clean"]];let u=new e(l,{theme:"snow",placeholder:"Start typing and see the preview on the left side.",modules:{toolbar:g}});u.container.firstChild.innerHTML=r,u.on("text-change",function(k,F,M){t(1,n.value=u.container.firstChild.innerHTML,n),c.set(n,{fromUser:!0,value:n.value,field:"value"})})});function m(e){h[e?"unshift":"push"](()=>{l=e,t(0,l)})}return o.$$set=e=>{"field"in e&&t(1,n=e.field),"value"in e&&t(2,r=e.value),"onChange"in e&&t(3,s=e.onChange)},[l,n,r,s,m]}class S extends v{constructor(o){super();w(this,o,x,q,j,{field:1,value:2,onChange:3})}}export default S;
