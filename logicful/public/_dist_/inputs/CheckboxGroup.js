import{SvelteComponent as H,append as _,attr as u,bubble as S,check_outros as I,create_component as J,destroy_component as K,destroy_each as Q,detach as j,element as m,empty as q,group_outros as R,init as W,insert as O,listen as w,mount_component as X,run_all as D,safe_not_equal as Y,set_data as Z,space as L,stop_propagation as F,text as E,transition_in as N,transition_out as G}from"../../web_modules/svelte/internal.js";import{subscribeFieldChange as y}from"../event/FieldEvent.js";import $ from"./Label.js";import{onMount as M}from"../../web_modules/svelte.js";import U from"../store/FormStore.js";import{debounce as x}from"../util/Debounce.js";function P(t,f,n){const o=t.slice();return o[12]=f[n],o}function V(t){let f,n;return f=new $({props:{field:t[0],type:"inline"}}),{c(){J(f.$$.fragment)},m(o,e){X(f,o,e),n=!0},p(o,e){const i={};e&1&&(i.field=o[0]),f.$set(i)},i(o){if(n)return;N(f.$$.fragment,o),n=!0},o(o){G(f.$$.fragment,o),n=!1},d(o){K(f,o)}}}function z(t){let f,n,o=t[0].options,e=[];for(let l=0;l<o.length;l+=1)e[l]=A(P(t,o,l));let i=t[0].includeOther&&B(t);return{c(){for(let l=0;l<e.length;l+=1)e[l].c();f=L(),i&&i.c(),n=q()},m(l,s){for(let r=0;r<e.length;r+=1)e[r].m(l,s);O(l,f,s),i&&i.m(l,s),O(l,n,s)},p(l,s){if(s&25){o=l[0].options;let r;for(r=0;r<o.length;r+=1){const a=P(l,o,r);e[r]?e[r].p(a,s):(e[r]=A(a),e[r].c(),e[r].m(f.parentNode,f))}for(;r<e.length;r+=1)e[r].d(1);e.length=o.length}l[0].includeOther?i?i.p(l,s):(i=B(l),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(l){Q(e,l),l&&j(f),i&&i.d(l),l&&j(n)}}}function A(t){let f,n,o,e,i,l,s,r,a,g=t[12]+"",b,k,v,h;function d(...c){return t[9](t[12],...c)}return{c(){f=m("div"),n=m("div"),o=m("div"),e=m("input"),s=L(),r=m("div"),a=m("label"),b=E(g),u(e,"class",`form-checkbox h-4 w-4 text-indigo-600 transition duration-150
              ease-in-out`),u(e,"type","checkbox"),e.value="",e.checked=i=t[4](t[12]),u(e,"id",l=`${t[0].id}-${t[12]}`),u(o,"class","flex items-center h-5"),u(a,"for",k=`${t[0].id}-${t[12]}`),u(a,"class","font-medium text-gray-700"),u(r,"class","ml-3 text-sm leading-5"),u(n,"class","relative flex items-start"),u(f,"class","mt-4")},m(c,C){O(c,f,C),_(f,n),_(n,o),_(o,e),_(n,s),_(n,r),_(r,a),_(a,b),v||(h=[w(e,"click",F(t[8])),w(e,"change",d)],v=!0)},p(c,C){t=c,C&1&&i!==(i=t[4](t[12]))&&(e.checked=i),C&1&&l!==(l=`${t[0].id}-${t[12]}`)&&u(e,"id",l),C&1&&g!==(g=t[12]+"")&&Z(b,g),C&1&&k!==(k=`${t[0].id}-${t[12]}`)&&u(a,"for",k)},d(c){c&&j(f),v=!1,D(h)}}}function B(t){let f,n,o,e,i,l,s,r,a,g,b,k,v,h,d,c,C;return{c(){f=m("div"),n=m("div"),o=m("div"),e=m("input"),s=L(),r=m("div"),a=m("label"),g=E("Other:"),k=L(),v=m("div"),h=m("input"),u(e,"class",`form-checkbox h-4 w-4 text-indigo-600 transition duration-150
              ease-in-out`),u(e,"type","checkbox"),e.value="",e.checked=i=t[1]!="",u(e,"id",l=`${t[0].id}-other`),u(o,"class","flex items-center h-5"),u(a,"for",b=`${t[0].id}-other`),u(a,"class","font-medium text-gray-700"),u(r,"class","ml-3 text-sm leading-5"),u(n,"class","relative flex items-start"),u(f,"class","mt-4"),u(h,"class","form-input block w-full sm:text-sm sm:leading-5"),u(h,"type","text"),h.value=t[1],u(h,"id",d=`${t[0].id}-other`),u(v,"class","mt-4")},m(p,T){O(p,f,T),_(f,n),_(n,o),_(o,e),_(n,s),_(n,r),_(r,a),_(a,g),O(p,k,T),O(p,v,T),_(v,h),c||(C=[w(e,"click",F(t[7])),w(h,"click",F(t[6])),w(h,"input",t[10])],c=!0)},p(p,T){T&2&&i!==(i=p[1]!="")&&(e.checked=i),T&1&&l!==(l=`${p[0].id}-other`)&&u(e,"id",l),T&1&&b!==(b=`${p[0].id}-other`)&&u(a,"for",b),T&2&&h.value!==p[1]&&(h.value=p[1]),T&1&&d!==(d=`${p[0].id}-other`)&&u(h,"id",d)},d(p){p&&j(f),p&&j(k),p&&j(v),c=!1,D(C)}}}function ee(t){let f,n,o,e=!t[0].hideLabel&&V(t),i=t[0].options&&z(t);return{c(){e&&e.c(),f=L(),i&&i.c(),n=q()},m(l,s){e&&e.m(l,s),O(l,f,s),i&&i.m(l,s),O(l,n,s),o=!0},p(l,[s]){l[0].hideLabel?e&&(R(),G(e,1,1,()=>{e=null}),I()):e?(e.p(l,s),s&1&&N(e,1)):(e=V(l),e.c(),N(e,1),e.m(f.parentNode,f)),l[0].options?i?i.p(l,s):(i=z(l),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i(l){if(o)return;N(e),o=!0},o(l){G(e),o=!1},d(l){e&&e.d(l),l&&j(f),i&&i.d(l),l&&j(n)}}}function le(t,f,n){let{field:o}=f,{value:e={}}=f,i="",l;y(M,d=>{d.id===o.id&&(n(5,e=d.value??{}),n(1,i=e.other??""))}),M(()=>{l=x(d=>{U.set(d,{fromUser:!0,field:"value",value:d.value})},500),n(5,e=U.getValue(o.configTarget??o.id)??{}),n(1,i=e.other??"")});function s(d){n(1,i=d.target.value),i===""||i==null?delete e.other:n(5,e.other=i??"",e),n(0,o.value=e,o),l(o)}function r(d,c){d.stopPropagation(),d.target.checked?n(5,e[c]=c,e):delete e[c],n(0,o.value=e,o),U.set(o,{fromUser:!0,field:"value",value:o.value})}function a(d){return e[d]!=null&&e[d]!=""}function g(d){S(t,d)}function b(d){S(t,d)}function k(d){S(t,d)}const v=(d,c)=>r(c,d),h=d=>s(d);return t.$$set=d=>{"field"in d&&n(0,o=d.field),"value"in d&&n(5,e=d.value)},[o,i,s,r,a,e,g,b,k,v,h]}class ie extends H{constructor(t){super();W(this,t,le,ee,Y,{field:0,value:5})}}export default ie;
