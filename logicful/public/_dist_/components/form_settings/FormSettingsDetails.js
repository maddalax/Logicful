import{SvelteComponent as x,append as u,attr as o,check_outros as G,create_component as Q,destroy_component as R,detach as h,element as c,group_outros as P,init as ee,insert as y,listen as te,mount_component as U,noop as $,safe_not_equal as le,set_style as p,space as D,text as A,transition_in as E,transition_out as I}from"../../../web_modules/svelte/internal.js";import{dispatch as ie,subscribeComponent as re}from"../../event/EventBus.js";import"../../features/form/edit/FormEdit.js";import oe from"../../features/form/edit/FormEditSettings.js";import{saveForm as ne}from"../../features/form/edit/services/SaveForm.js";import{onMount as se}from"../../../web_modules/svelte.js";import fe from"./EmailSettings.js";function X(n){let e,l,t,r,i,f,d;const _=[de,me],m=[];function w(s,b){return s[0]?0:1}return i=w(n,-1),f=m[i]=_[i](n),{c(){e=c("div"),e.innerHTML='<h3 class="h5 mb-0" style="padding-top: 0.4em;">General</h3>',l=D(),t=c("div"),r=c("div"),f.c(),o(e,"class","card-header bg-white border-light p-3 mb-4 mb-md-0"),p(e,"display","flex"),p(e,"padding-top","0.2em",1),o(r,"class","row justify-content-center"),o(t,"class","card-body p-0 p-md-4"),p(t,"padding-top","0.5em",1)},m(s,b){y(s,e,b),y(s,l,b),y(s,t,b),u(t,r),m[i].m(r,null),d=!0},p(s,b){let F=i;i=w(s,b),i===F?m[i].p(s,b):(P(),I(m[F],1,1,()=>{m[F]=null}),G(),f=m[i],f||(f=m[i]=_[i](s),f.c()),E(f,1),f.m(r,null))},i(s){if(d)return;E(f),d=!0},o(s){I(f),d=!1},d(s){s&&h(e),s&&h(l),s&&h(t),m[i].d()}}}function me(n){let e;return{c(){e=c("div"),o(e,"class","spinner")},m(l,t){y(l,e,t)},p:$,i:$,o:$,d(l){l&&h(e)}}}function de(n){let e,l;return e=new oe({props:{form:n[0]}}),{c(){Q(e.$$.fragment)},m(t,r){U(e,t,r),l=!0},p(t,r){const i={};r&1&&(i.form=t[0]),e.$set(i)},i(t){if(l)return;E(e.$$.fragment,t),l=!0},o(t){I(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function Y(n){let e,l,t,r;function i(_,m){return _[0]?ae:ce}let f=i(n,-1),d=f(n);return{c(){e=c("div"),e.innerHTML='<h3 class="h5 mb-0" style="padding-top: 0.4em;">Workflows</h3>',l=D(),t=c("div"),r=c("div"),d.c(),o(e,"class","card-header bg-white border-light p-3 mb-4 mb-md-0"),p(e,"display","flex"),p(e,"padding-top","0.2em",1),o(r,"class","row justify-content-center"),o(t,"class","card-body p-0 p-md-4"),p(t,"padding-top","0.5em",1)},m(_,m){y(_,e,m),y(_,l,m),y(_,t,m),u(t,r),d.m(r,null)},p(_,m){f!==(f=i(_,m))&&(d.d(1),d=f(_),d&&(d.c(),d.m(r,null)))},d(_){_&&h(e),_&&h(l),_&&h(t),d.d()}}}function ce(n){let e;return{c(){e=c("div"),o(e,"class","spinner")},m(l,t){y(l,e,t)},d(l){l&&h(e)}}}function ae(n){return{c:$,m:$,d:$}}function Z(n){let e,l,t,r,i,f,d;const _=[_e,ue],m=[];function w(s,b){return s[0]?0:1}return i=w(n,-1),f=m[i]=_[i](n),{c(){e=c("div"),e.innerHTML='<h3 class="h5 mb-0" style="padding-top: 0.4em;">Configure Emails</h3>',l=D(),t=c("div"),r=c("div"),f.c(),o(e,"class","card-header bg-white border-light p-3 mb-4 mb-md-0"),p(e,"display","flex"),p(e,"padding-top","0.2em",1),o(r,"class","row justify-content-center"),o(t,"class","card-body p-0 p-md-4"),p(t,"padding-top","0.5em",1)},m(s,b){y(s,e,b),y(s,l,b),y(s,t,b),u(t,r),m[i].m(r,null),d=!0},p(s,b){let F=i;i=w(s,b),i===F?m[i].p(s,b):(P(),I(m[F],1,1,()=>{m[F]=null}),G(),f=m[i],f||(f=m[i]=_[i](s),f.c()),E(f,1),f.m(r,null))},i(s){if(d)return;E(f),d=!0},o(s){I(f),d=!1},d(s){s&&h(e),s&&h(l),s&&h(t),m[i].d()}}}function ue(n){let e;return{c(){e=c("div"),o(e,"class","spinner")},m(l,t){y(l,e,t)},p:$,i:$,o:$,d(l){l&&h(e)}}}function _e(n){let e,l;return e=new fe({props:{form:n[0]}}),{c(){Q(e.$$.fragment)},m(t,r){U(e,t,r),l=!0},p(t,r){const i={};r&1&&(i.form=t[0]),e.$set(i)},i(t){if(l)return;E(e.$$.fragment,t),l=!0},o(t){I(e.$$.fragment,t),l=!1},d(t){R(e,t)}}}function pe(n){let e,l,t;return{c(){e=c("button"),e.textContent="Save Changes",o(e,"class","btn btn-primary"),o(e,"type","button")},m(r,i){y(r,e,i),l||(t=te(e,"click",n[3]),l=!0)},p:$,d(r){r&&h(e),l=!1,t()}}}function be(n){let e;return{c(){e=c("button"),e.textContent="Saving...",o(e,"class","btn btn-primary"),o(e,"type","button"),e.disabled=!0},m(l,t){y(l,e,t)},p:$,d(l){l&&h(e)}}}function ve(n){let e,l,t,r,i,f,d,_,m,w,s,b,F,J,T,M,K,q,N,k,V,W,z,H,L,v=n[1]==="general"&&X(n),j=n[1]==="workflows"&&Y(n),g=n[1]==="emails"&&Z(n);function O(a,S){return a[2]?be:pe}let B=O(n,-1),C=B(n);return{c(){e=c("div"),l=c("div"),t=c("div"),r=c("div"),i=c("a"),f=A("View Submissions"),_=D(),m=c("div"),w=c("a"),s=c("span"),b=A(" Edit Form"),J=D(),T=c("div"),M=c("a"),K=A("Preview Form"),N=D(),k=c("form"),v&&v.c(),V=D(),j&&j.c(),W=D(),g&&g.c(),z=D(),H=c("div"),C.c(),o(i,"href",d=`/form/submissions?formId=${n[0].id}`),o(i,"target","_blank"),o(i,"class","btn btn-outline-dark"),p(r,"text-align","right"),o(s,"class","fas fa-pencil-alt"),o(w,"href",F=`/form/builder?formId=${n[0].id}`),o(w,"target","_blank"),o(w,"class","btn btn-outline-dark"),p(m,"text-align","right"),p(m,"padding-left","0.5em"),o(M,"href",q=`/form/preview?formId=${n[0].id}&mode=local`),o(M,"target","_blank"),o(M,"class","btn btn-outline-dark"),p(T,"text-align","right"),p(T,"padding-left","0.5em"),o(t,"class","d-flex justify-content-end"),p(t,"padding-bottom","1em"),p(t,"padding-left","0"),p(t,"display","flex"),p(t,"text-align","right"),o(H,"class","d-flex justify-content-end ml-auto"),p(H,"padding-right","1em"),p(H,"padding-bottom","1em"),o(k,"action","#"),o(k,"method","post"),o(k,"class","card border-light p-3 mb-4"),o(l,"class","col-12 mb-4"),o(e,"class","row mb-5")},m(a,S){y(a,e,S),u(e,l),u(l,t),u(t,r),u(r,i),u(i,f),u(t,_),u(t,m),u(m,w),u(w,s),u(w,b),u(t,J),u(t,T),u(T,M),u(M,K),u(l,N),u(l,k),v&&v.m(k,null),u(k,V),j&&j.m(k,null),u(k,W),g&&g.m(k,null),u(k,z),u(k,H),C.m(H,null),L=!0},p(a,[S]){(!L||S&1&&d!==(d=`/form/submissions?formId=${a[0].id}`))&&o(i,"href",d),(!L||S&1&&F!==(F=`/form/builder?formId=${a[0].id}`))&&o(w,"href",F),(!L||S&1&&q!==(q=`/form/preview?formId=${a[0].id}&mode=local`))&&o(M,"href",q),a[1]==="general"?v?(v.p(a,S),S&2&&E(v,1)):(v=X(a),v.c(),E(v,1),v.m(k,V)):v&&(P(),I(v,1,1,()=>{v=null}),G()),a[1]==="workflows"?j?j.p(a,S):(j=Y(a),j.c(),j.m(k,W)):j&&(j.d(1),j=null),a[1]==="emails"?g?(g.p(a,S),S&2&&E(g,1)):(g=Z(a),g.c(),E(g,1),g.m(k,z)):g&&(P(),I(g,1,1,()=>{g=null}),G()),B===(B=O(a,S))&&C?C.p(a,S):(C.d(1),C=B(a),C&&(C.c(),C.m(H,null)))},i(a){if(L)return;E(v),E(g),L=!0},o(a){I(v),I(g),L=!1},d(a){a&&h(e),v&&v.d(),j&&j.d(),g&&g.d(),C.d()}}}function ge(n,e,l){let t=!1,{form:r}=e,{selected:i}=e;async function f(){l(2,t=!0),await ie("save_form",{status:"draft"}),l(2,t=!1)}return re("save_form",async d=>{await ne()}),se(()=>{console.log(i)}),n.$$set=d=>{"form"in d&&l(0,r=d.form),"selected"in d&&l(1,i=d.selected)},[r,i,t,f]}class ke extends x{constructor(n){super();ee(this,n,ge,ve,le,{form:0,selected:1})}}export default ke;
