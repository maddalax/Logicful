import"./List.css.proxy.js";import{SvelteComponent as ge,append as y,attr as k,binding_callbacks as W,check_outros as H,create_component as S,destroy_component as C,destroy_each as Ie,detach as v,element as V,empty as q,group_outros as T,init as ve,insert as b,listen as M,mount_component as E,noop as X,run_all as Y,safe_not_equal as be,set_data as Z,space as x,text as $,transition_in as g,transition_out as I}from"../../../web_modules/svelte/internal.js";import{beforeUpdate as pe,createEventDispatcher as Le,onDestroy as ke,onMount as He,tick as Ve}from"../../../web_modules/svelte.js";import Te from"./Item.js";import we from"./VirtualList.js";function ee(n,t,e){const r=n.slice();return r[34]=t[e],r[36]=e,r}function te(n){let t,e,r;return e=new we({props:{items:n[4],itemHeight:n[7],$$slots:{default:[Oe,({item:i,i:c})=>({34:i,36:c}),({item:i,i:c})=>[0,(i?8:0)|(c?32:0)]]},$$scope:{ctx:n}}}),{c(){t=V("div"),S(e.$$.fragment),k(t,"class","listContainer virtualList svelte-ux0sbr")},m(i,c){b(i,t,c),E(e,t,null),n[20](t),r=!0},p(i,c){const o={};c[0]&16&&(o.items=i[4]),c[0]&128&&(o.itemHeight=i[7]),c[0]&4918|c[1]&104&&(o.$$scope={dirty:c,ctx:i}),e.$set(o)},i(i){if(r)return;g(e.$$.fragment,i),r=!0},o(i){I(e.$$.fragment,i),r=!1},d(i){i&&v(t),C(e),n[20](null)}}}function Oe(n){let t,e,r,i,c;var o=n[2];function l(a){return{props:{item:a[34],filterText:a[12],getOptionLabel:a[5],isFirst:K(a[36]),isActive:A(a[34],a[8],a[9]),isHover:D(a[1],a[34],a[36],a[4])}}}o&&(e=new o(l(n)));function u(...a){return n[18](n[36],...a)}function m(...a){return n[19](n[34],n[36],...a)}return{c(){t=V("div"),e&&S(e.$$.fragment),k(t,"class","listItem")},m(a,f){b(a,t,f),e&&E(e,t,null),r=!0,i||(c=[M(t,"mouseover",u),M(t,"click",m)],i=!0)},p(a,f){n=a;const d={};if(f[1]&8&&(d.item=n[34]),f[0]&4096&&(d.filterText=n[12]),f[0]&32&&(d.getOptionLabel=n[5]),f[1]&32&&(d.isFirst=K(n[36])),f[0]&768|f[1]&8&&(d.isActive=A(n[34],n[8],n[9])),f[0]&18|f[1]&40&&(d.isHover=D(n[1],n[34],n[36],n[4])),o!==(o=n[2])){if(e){T();const _=e;I(_.$$.fragment,1,0,()=>{C(_,1)}),H()}o?(e=new o(l(n)),S(e.$$.fragment),g(e.$$.fragment,1),E(e,t,null)):e=null}else o&&e.$set(d)},i(a){if(r)return;e&&g(e.$$.fragment,a),r=!0},o(a){e&&I(e.$$.fragment,a),r=!1},d(a){a&&v(t),e&&C(e),i=!1,Y(c)}}}function ie(n){let t,e,r=n[4],i=[];for(let l=0;l<r.length;l+=1)i[l]=se(ee(n,r,l));const c=l=>I(i[l],1,1,()=>{i[l]=null});let o=null;return r.length||(o=ne(n)),{c(){t=V("div");for(let l=0;l<i.length;l+=1)i[l].c();o&&o.c(),k(t,"class","listContainer svelte-ux0sbr")},m(l,u){b(l,t,u);for(let m=0;m<i.length;m+=1)i[m].m(t,null);o&&o.m(t,null),n[23](t),e=!0},p(l,u){if(u[0]&32630){r=l[4];let m;for(m=0;m<r.length;m+=1){const a=ee(l,r,m);i[m]?(i[m].p(a,u),g(i[m],1)):(i[m]=se(a),i[m].c(),g(i[m],1),i[m].m(t,null))}for(T(),m=r.length;m<i.length;m+=1)c(m);H(),!r.length&&o?o.p(l,u):r.length?o&&(o.d(1),o=null):(o=ne(l),o.c(),o.m(t,null))}},i(l){if(e)return;for(let u=0;u<r.length;u+=1)g(i[u]);e=!0},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)I(i[u]);e=!1},d(l){l&&v(t),Ie(i,l),o&&o.d(),n[23](null)}}}function ne(n){let t,e=!n[10]&&le(n);return{c(){e&&e.c(),t=q()},m(r,i){e&&e.m(r,i),b(r,t,i)},p(r,i){r[10]?e&&(e.d(1),e=null):e?e.p(r,i):(e=le(r),e.c(),e.m(t.parentNode,t))},d(r){e&&e.d(r),r&&v(t)}}}function le(n){let t,e;return{c(){t=V("div"),e=$(n[11]),k(t,"class","empty svelte-ux0sbr")},m(r,i){b(r,t,i),y(t,e)},p(r,i){i[0]&2048&&Z(e,r[11])},d(r){r&&v(t)}}}function Se(n){let t,e,r,i,c,o;var l=n[2];function u(f){return{props:{item:f[34],filterText:f[12],getOptionLabel:f[5],isFirst:K(f[36]),isActive:A(f[34],f[8],f[9]),isHover:D(f[1],f[34],f[36],f[4])}}}l&&(e=new l(u(n)));function m(...f){return n[21](n[36],...f)}function a(...f){return n[22](n[34],n[36],...f)}return{c(){t=V("div"),e&&S(e.$$.fragment),r=x(),k(t,"class","listItem")},m(f,d){b(f,t,d),e&&E(e,t,null),y(t,r),i=!0,c||(o=[M(t,"mouseover",m),M(t,"click",a)],c=!0)},p(f,d){n=f;const _={};if(d[0]&16&&(_.item=n[34]),d[0]&4096&&(_.filterText=n[12]),d[0]&32&&(_.getOptionLabel=n[5]),d[0]&784&&(_.isActive=A(n[34],n[8],n[9])),d[0]&18&&(_.isHover=D(n[1],n[34],n[36],n[4])),l!==(l=n[2])){if(e){T();const w=e;I(w.$$.fragment,1,0,()=>{C(w,1)}),H()}l?(e=new l(u(n)),S(e.$$.fragment),g(e.$$.fragment,1),E(e,t,r)):e=null}else l&&e.$set(_)},i(f){if(i)return;e&&g(e.$$.fragment,f),i=!0},o(f){e&&I(e.$$.fragment,f),i=!1},d(f){f&&v(t),e&&C(e),c=!1,Y(o)}}}function Ce(n){let t,e=n[6](n[34])+"",r;return{c(){t=V("div"),r=$(e),k(t,"class","listGroupTitle svelte-ux0sbr")},m(i,c){b(i,t,c),y(t,r)},p(i,c){c[0]&80&&e!==(e=i[6](i[34])+"")&&Z(r,e)},i:X,o:X,d(i){i&&v(t)}}}function se(n){let t,e,r,i;const c=[Ce,Se],o=[];function l(u,m){return u[34].isGroupHeader&&!u[34].isSelectable?0:1}return t=l(n,[-1]),e=o[t]=c[t](n),{c(){e.c(),r=q()},m(u,m){o[t].m(u,m),b(u,r,m),i=!0},p(u,m){let a=t;t=l(u,m),t===a?o[t].p(u,m):(T(),I(o[a],1,1,()=>{o[a]=null}),H(),e=o[t],e||(e=o[t]=c[t](u),e.c()),g(e,1),e.m(r.parentNode,r))},i(u){if(i)return;g(e),i=!0},o(u){I(e),i=!1},d(u){o[t].d(u),u&&v(r)}}}function Me(n){let t,e,r,i,c,o=n[3]&&te(n),l=!n[3]&&ie(n);return{c(){o&&o.c(),t=x(),l&&l.c(),e=q()},m(u,m){o&&o.m(u,m),b(u,t,m),l&&l.m(u,m),b(u,e,m),r=!0,i||(c=M(window,"keydown",n[15]),i=!0)},p(u,m){u[3]?o?(o.p(u,m),m[0]&8&&g(o,1)):(o=te(u),o.c(),g(o,1),o.m(t.parentNode,t)):o&&(T(),I(o,1,1,()=>{o=null}),H()),u[3]?l&&(T(),I(l,1,1,()=>{l=null}),H()):l?(l.p(u,m),m[0]&8&&g(l,1)):(l=ie(u),l.c(),g(l,1),l.m(e.parentNode,e))},i(u){if(r)return;g(o),g(l),r=!0},o(u){I(o),I(l),r=!1},d(u){o&&o.d(u),u&&v(t),l&&l.d(u),u&&v(e),i=!1,c()}}}function ye(n,t,e,r,i,c,o){return`${i&&!o&&i[c]===t[c]?"active ":""}${n===e||r.length===1?"hover":""}`}function A(n,t,e){return t&&t[e]===n[e]}function K(n){return n===0}function D(n,t,e,r){return n===e||r.length===1}function Ee(n,t,e){const r=Le();let{container:i=void 0}=t,{Item:c=Te}=t,{isVirtualList:o=!1}=t,{items:l=[]}=t,{getOptionLabel:u=(s,h)=>{if(s)return s.isCreator?`Create "${h}"`:s.label}}=t,{getGroupHeaderLabel:m=s=>s.label}=t,{itemHeight:a=40}=t,{hoverItemIndex:f=0}=t,{selectedValue:d=void 0}=t,{optionIdentifier:_="value"}=t,{hideEmptyState:w=!1}=t,{noOptionsMessage:R="No options"}=t,{isMulti:O=!1}=t,{activeItemIndex:L=0}=t,{filterText:G=""}=t,U=0,P=!1,z,re,oe;He(()=>{if(l.length>0&&!O&&d){const s=l.findIndex(h=>h[_]===d[_]);s&&e(1,f=s)}Q("active"),i.addEventListener("scroll",()=>{clearTimeout(U),U=setTimeout(()=>{P=!1},100)},!1)}),ke(()=>{}),pe(()=>{l!==z&&l.length>0&&e(1,f=0),z=l,re=L,oe=d});function N(s){if(s.isCreator)return;r("itemSelected",s)}function j(s){if(P)return;e(1,f=s)}function B(s){const{item:h,i:p,event:he}=s;if(he.stopPropagation(),d&&!O&&d[_]===h[_])return F();h.isCreator?r("itemCreated",G):(e(16,L=p),e(1,f=p),N(h))}function F(){r("closeList")}async function J(s){if(o)return;let h=!0;for(;h;)s>0&&f===l.length-1?e(1,f=0):s<0&&f===0?e(1,f=l.length-1):e(1,f=f+s),h=l[f].isGroupHeader&&!l[f].isSelectable;await Ve(),Q("hover")}function fe(s){switch(s.key){case"ArrowDown":s.preventDefault(),l.length&&J(1);break;case"ArrowUp":s.preventDefault(),l.length&&J(-1);break;case"Enter":if(s.preventDefault(),l.length===0)break;const h=l[f];if(d&&!O&&d[_]===h[_]){F();break}h.isCreator?r("itemCreated",G):(e(16,L=f),N(l[f]));break;case"Tab":if(s.preventDefault(),l.length===0)break;if(d&&d[_]===l[f][_])return F();e(16,L=f),N(l[f]);break}}function Q(s){if(o||!i)return;let h;const p=i.querySelector(`.listItem .${s}`);p&&(h=i.getBoundingClientRect().bottom-p.getBoundingClientRect().bottom),e(0,i.scrollTop-=h,i)}const ue=s=>j(s),me=(s,h,p)=>B({item:s,i:h,event:p});function ae(s){W[s?"unshift":"push"](()=>{i=s,e(0,i)})}const ce=s=>j(s),de=(s,h,p)=>B({item:s,i:h,event:p});function _e(s){W[s?"unshift":"push"](()=>{i=s,e(0,i)})}return n.$$set=s=>{"container"in s&&e(0,i=s.container),"Item"in s&&e(2,c=s.Item),"isVirtualList"in s&&e(3,o=s.isVirtualList),"items"in s&&e(4,l=s.items),"getOptionLabel"in s&&e(5,u=s.getOptionLabel),"getGroupHeaderLabel"in s&&e(6,m=s.getGroupHeaderLabel),"itemHeight"in s&&e(7,a=s.itemHeight),"hoverItemIndex"in s&&e(1,f=s.hoverItemIndex),"selectedValue"in s&&e(8,d=s.selectedValue),"optionIdentifier"in s&&e(9,_=s.optionIdentifier),"hideEmptyState"in s&&e(10,w=s.hideEmptyState),"noOptionsMessage"in s&&e(11,R=s.noOptionsMessage),"isMulti"in s&&e(17,O=s.isMulti),"activeItemIndex"in s&&e(16,L=s.activeItemIndex),"filterText"in s&&e(12,G=s.filterText)},[i,f,c,o,l,u,m,a,d,_,w,R,G,j,B,fe,L,O,ue,me,ae,ce,de,_e]}class Ge extends ge{constructor(n){super();ve(this,n,Ee,Me,be,{container:0,Item:2,isVirtualList:3,items:4,getOptionLabel:5,getGroupHeaderLabel:6,itemHeight:7,hoverItemIndex:1,selectedValue:8,optionIdentifier:9,hideEmptyState:10,noOptionsMessage:11,isMulti:17,activeItemIndex:16,filterText:12},[-1,-1])}}export default Ge;
