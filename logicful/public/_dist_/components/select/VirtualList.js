import"./VirtualList.css.proxy.js";import{SvelteComponent as U,add_render_callback as W,add_resize_listener as X,append as B,binding_callbacks as C,check_outros as Y,create_slot as Z,detach as M,element as L,group_outros as $,init as ee,insert as O,listen as te,outro_and_destroy_block as le,safe_not_equal as ie,set_custom_element_data as V,set_style as I,space as ne,text as se,transition_in as E,transition_out as N,update_keyed_each as oe,update_slot as re}from"../../../web_modules/svelte/internal.js";import{onMount as _e,tick as D}from"../../../web_modules/svelte.js";const he=t=>({item:t&32,i:t&32,hoverItemIndex:t&2}),A=t=>({item:t[23].data,i:t[23].index,hoverItemIndex:t[1]});function F(t,l,e){const r=t.slice();return r[23]=l[e],r}function ae(t){let l;return{c(){l=se("Missing template")},m(e,r){O(e,l,r)},d(e){e&&M(l)}}}function G(t,l){let e,r,d;const f=l[14].default,u=Z(f,l,l[13],A),_=u||ae(l);return{key:t,first:null,c(){e=L("svelte-virtual-list-row"),_&&_.c(),r=ne(),V(e,"class","svelte-13thbeo"),this.first=e},m(a,o){O(a,e,o),_&&_.m(e,null),B(e,r),d=!0},p(a,o){u&&(u.p&&o&8226&&re(u,f,a,a[13],o,he,A))},i(a){if(d)return;E(_,a),d=!0},o(a){N(_,a),d=!1},d(a){a&&M(e),_&&_.d(a)}}}function ce(t){let l,e,r=[],d=new Map,f,u,_,a,o=t[5];const g=i=>i[23].index;for(let i=0;i<o.length;i+=1){let n=F(t,o,i),c=g(n);d.set(c,r[i]=G(c,n))}return{c(){l=L("svelte-virtual-list-viewport"),e=L("svelte-virtual-list-contents");for(let i=0;i<r.length;i+=1)r[i].c();I(e,"padding-top",t[6]+"px"),I(e,"padding-bottom",t[7]+"px"),V(e,"class","svelte-13thbeo"),I(l,"height",t[0]),V(l,"class","svelte-13thbeo"),W(()=>t[17].call(l))},m(i,n){O(i,l,n),B(l,e);for(let c=0;c<r.length;c+=1)r[c].m(e,null);t[15](e),t[16](l),f=X(l,t[17].bind(l)),u=!0,_||(a=te(l,"scroll",t[8]),_=!0)},p(i,[n]){if(n&8226){const c=i[5];$(),r=oe(r,n,g,1,i,c,d,e,le,G,null,F),Y()}(!u||n&64)&&I(e,"padding-top",i[6]+"px"),(!u||n&128)&&I(e,"padding-bottom",i[7]+"px"),(!u||n&1)&&I(l,"height",i[0])},i(i){if(u)return;for(let n=0;n<o.length;n+=1)E(r[n]);u=!0},o(i){for(let n=0;n<r.length;n+=1)N(r[n]);u=!1},d(i){i&&M(l);for(let n=0;n<r.length;n+=1)r[n].d();t[15](null),t[16](null),f(),_=!1,a()}}}function ue(t,l,e){let{$$slots:r={},$$scope:d}=l,{items:f=void 0}=l,{height:u="100%"}=l,{itemHeight:_=40}=l,{hoverItemIndex:a=0}=l,{start:o=0}=l,{end:g=0}=l,i=[],n,c,x,k=0,S,q,T=0,z=0,w;async function J(s,p,m){const{scrollTop:v}=c;await D();let y=T-v,h=o;for(;y<p&&h<s.length;){let H=n[h-o];H||(e(10,g=h+1),await D(),H=n[h-o]);const b=i[h]=m||H.offsetHeight;y+=b,h+=1}e(10,g=h);const j=s.length-g;w=(T+y)/g,e(7,z=j*w),i.length=s.length,e(2,c.scrollTop=0,c)}async function K(){const{scrollTop:s}=c,p=o;for(let h=0;h<n.length;h+=1)i[o+h]=_||n[h].offsetHeight;let m=0,v=0;for(;m<f.length;){const h=i[m]||w;if(v+h>s){e(9,o=m),e(6,T=v);break}v+=h,m+=1}for(;m<f.length&&!(v+=i[m]||w,m+=1,v>s+k););e(10,g=m);const y=f.length-g;for(w=v/g;m<f.length;)i[m++]=w;if(e(7,z=y*w),o<p){await D();let h=0,j=0;for(let b=o;b<p;b+=1)n[b-o]&&(h+=i[b],j+=_||n[b-o].offsetHeight);const H=j-h;c.scrollTo(0,s+H)}}_e(()=>{n=x.getElementsByTagName("svelte-virtual-list-row"),e(20,q=!0)});function P(s){C[s?"unshift":"push"](()=>{x=s,e(3,x)})}function Q(s){C[s?"unshift":"push"](()=>{c=s,e(2,c)})}function R(){k=this.offsetHeight,e(4,k)}return t.$$set=s=>{"items"in s&&e(11,f=s.items),"height"in s&&e(0,u=s.height),"itemHeight"in s&&e(12,_=s.itemHeight),"hoverItemIndex"in s&&e(1,a=s.hoverItemIndex),"start"in s&&e(9,o=s.start),"end"in s&&e(10,g=s.end),"$$scope"in s&&e(13,d=s.$$scope)},t.$$.update=()=>{if(t.$$.dirty&3584){e:e(5,S=f.slice(o,g).map((s,p)=>({index:p+o,data:s})))}if(t.$$.dirty&1054736){e:q&&J(f,k,_)}},[u,a,c,x,k,S,T,z,K,o,g,f,_,d,r,P,Q,R]}class fe extends U{constructor(t){super();ee(this,t,ue,ce,ie,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}export default fe;
