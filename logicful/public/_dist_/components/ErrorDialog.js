import{SvelteComponent as $,append as g,check_outros as b,create_component as w,destroy_component as y,detach as c,element as f,empty as h,group_outros as k,init as v,insert as p,mount_component as C,safe_not_equal as j,set_data as x,set_style as D,space as m,text as A,transition_in as u,transition_out as d}from"../../web_modules/svelte/internal.js";import{dispatch as E,subscribeComponent as P}from"../event/EventBus.js";import{onMount as O}from"../../web_modules/svelte.js";import R from"./layout/Dialog.js";function _(l){let t,n;return t=new R({props:{isOpen:!0,title:"An error has occured",actions:[{label:"Reload Page",onClick:l[1],type:"primary"}],$$slots:{default:[S]},$$scope:{ctx:l}}}),{c(){w(t.$$.fragment)},m(e,o){C(t,e,o),n=!0},p(e,o){const r={};o&5&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){if(n)return;u(t.$$.fragment,e),n=!0},o(e){d(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function S(l){let t,n,e,o,r,i;return{c(){t=f("p"),t.textContent="An uncaught exception has occured.",n=m(),e=f("p"),o=A(l[0]),r=m(),i=f("p"),i.textContent="Your page may not continue working as expected, please reload the page.",D(e,"color","indigo")},m(s,a){p(s,t,a),p(s,n,a),p(s,e,a),g(e,o),p(s,r,a),p(s,i,a)},p(s,a){a&1&&x(o,s[0])},d(s){s&&c(t),s&&c(n),s&&c(e),s&&c(r),s&&c(i)}}}function Y(l){let t,n,e=l[0]!==""&&_(l);return{c(){e&&e.c(),t=h()},m(o,r){e&&e.m(o,r),p(o,t,r),n=!0},p(o,[r]){o[0]!==""?e?(e.p(o,r),r&1&&u(e,1)):(e=_(o),e.c(),u(e,1),e.m(t.parentNode,t)):e&&(k(),d(e,1,1,()=>{e=null}),b())},i(o){if(n)return;u(e),n=!0},o(o){d(e),n=!1},d(o){e&&e.d(o),o&&c(t)}}}function q(l,t,n){let e="";P("unhandled_error",r=>{console.log("err",r),n(0,e=r)}),O(()=>{window.onunhandledrejection=r=>{console.error(r);const i=r.reason?.message??r.stack??r.message;E("unhandled_error",i)}});const o=()=>{window.location.reload()};return[e,o]}class B extends ${constructor(l){super();v(this,l,q,Y,j,{})}}export default B;
