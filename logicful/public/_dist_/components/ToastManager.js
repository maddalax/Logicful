import{SvelteComponent as h,check_outros as p,create_component as d,destroy_component as v,destroy_each as $,detach as b,empty as j,group_outros as T,init as w,insert as k,mount_component as y,safe_not_equal as B,transition_in as c,transition_out as m}from"../../web_modules/svelte/internal.js";import{subscribeComponent as f}from"../event/EventBus.js";import"../../web_modules/svelte.js";import{randomString as M}from"../util/Generate.js";import S from"./Toast.js";function _(i,n,r){const e=i.slice();return e[2]=n[r],e}function g(i){let n,r;return n=new S({props:{message:i[2].message,title:i[2].title}}),{c(){d(n.$$.fragment)},m(e,t){y(n,e,t),r=!0},p(e,t){const a={};t&1&&(a.message=e[2].message),t&1&&(a.title=e[2].title),n.$set(a)},i(e){if(r)return;c(n.$$.fragment,e),r=!0},o(e){m(n.$$.fragment,e),r=!1},d(e){v(n,e)}}}function x(i){let n,r,e=i[0],t=[];for(let o=0;o<e.length;o+=1)t[o]=g(_(i,e,o));const a=o=>m(t[o],1,1,()=>{t[o]=null});return{c(){for(let o=0;o<t.length;o+=1)t[o].c();n=j()},m(o,l){for(let s=0;s<t.length;s+=1)t[s].m(o,l);k(o,n,l),r=!0},p(o,[l]){if(l&1){e=o[0];let s;for(s=0;s<e.length;s+=1){const u=_(o,e,s);t[s]?(t[s].p(u,l),c(t[s],1)):(t[s]=g(u),t[s].c(),c(t[s],1),t[s].m(n.parentNode,n))}for(T(),s=e.length;s<t.length;s+=1)a(s);p()}},i(o){if(r)return;for(let l=0;l<e.length;l+=1)c(t[l]);r=!0},o(o){t=t.filter(Boolean);for(let l=0;l<t.length;l+=1)m(t[l]);r=!1},d(o){$(t,o),o&&b(n)}}}function C(i,n,r){let e=[];f("show_toast",a=>{const o=M();r(0,e=e.concat([{id:o,message:a.message,title:a.title}])),setTimeout(()=>{t(o)},a.timeout||4e3)}),f("toast_closed",a=>{t(a.id)});function t(a){e.splice(e.findIndex(o=>o.id===a),1),r(0,e)}return[e]}class I extends h{constructor(i){super();w(this,i,C,x,B,{})}}export default I;
