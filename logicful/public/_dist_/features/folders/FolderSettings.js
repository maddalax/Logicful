import{SvelteComponent as E,attr as p,check_outros as _,create_component as C,destroy_component as g,detach as a,element as c,empty as O,group_outros as $,init as N,insert as u,listen as h,mount_component as b,safe_not_equal as q,set_input_value as v,space as k,transition_in as s,transition_out as d}from"../../../web_modules/svelte/internal.js";import A from"../../components/layout/Dialog.js";import{dispatch as D}from"../../event/EventBus.js";import{deleteApi as z,putApi as B}from"../../services/ApiService.js";function w(f){let l,i;return l=new A({props:{isOpen:!0,actions:f[3],title:`Confirm Deletion For ${f[0].name}`,onClose:f[1],$$slots:{default:[G]},$$scope:{ctx:f}}}),{c(){C(l.$$.fragment)},m(e,o){b(l,e,o),i=!0},p(e,o){const t={};o&1&&(t.title=`Confirm Deletion For ${e[0].name}`),o&2&&(t.onClose=e[1]),o&256&&(t.$$scope={dirty:o,ctx:e}),l.$set(t)},i(e){if(i)return;s(l.$$.fragment,e),i=!0},o(e){d(l.$$.fragment,e),i=!1},d(e){g(l,e)}}}function G(f){let l;return{c(){l=c("p"),l.textContent="Are you sure you want to delete this folder? All forms in this folder will be moved to uncategorized."},m(i,e){u(i,l,e)},d(i){i&&a(l)}}}function y(f){let l,i;return l=new A({props:{isOpen:!0,actions:f[4],title:`Editing ${f[0].name}`,onClose:f[1],$$slots:{default:[H]},$$scope:{ctx:f}}}),{c(){C(l.$$.fragment)},m(e,o){b(l,e,o),i=!0},p(e,o){const t={};o&1&&(t.title=`Editing ${e[0].name}`),o&2&&(t.onClose=e[1]),o&257&&(t.$$scope={dirty:o,ctx:e}),l.$set(t)},i(e){if(i)return;s(l.$$.fragment,e),i=!0},o(e){d(l.$$.fragment,e),i=!1},d(e){g(l,e)}}}function H(f){let l,i,e,o,t;return{c(){l=c("label"),l.textContent="Name",i=k(),e=c("input"),p(l,"for","name"),p(e,"type","text"),p(e,"class","form-control"),p(e,"name","name")},m(n,r){u(n,l,r),u(n,i,r),u(n,e,r),v(e,f[0].name),o||(t=h(e,"input",f[5]),o=!0)},p(n,r){r&1&&e.value!==n[0].name&&v(e,n[0].name)},d(n){n&&a(l),n&&a(i),n&&a(e),o=!1,t()}}}function I(f){let l,i,e,o=f[2]&&w(f),t=f[0]&&!f[2]&&y(f);return{c(){o&&o.c(),l=k(),t&&t.c(),i=O()},m(n,r){o&&o.m(n,r),u(n,l,r),t&&t.m(n,r),u(n,i,r),e=!0},p(n,[r]){n[2]?o?(o.p(n,r),r&4&&s(o,1)):(o=w(n),o.c(),s(o,1),o.m(l.parentNode,l)):o&&($(),d(o,1,1,()=>{o=null}),_()),n[0]&&!n[2]?t?(t.p(n,r),r&5&&s(t,1)):(t=y(n),t.c(),s(t,1),t.m(i.parentNode,i)):t&&($(),d(t,1,1,()=>{t=null}),_())},i(n){if(e)return;s(o),s(t),e=!0},o(n){d(o),d(t),e=!1},d(n){o&&o.d(n),n&&a(l),t&&t.d(n),n&&a(i)}}}function J(f,l,i){let{folder:e}=l,{onClose:o}=l,t=!1,n=[{label:"Confirm",onClick:F,type:"danger"},{label:"Cancel",onClick:()=>i(2,t=!1),type:"secondary",onClose:!1}],r=[{label:"Delete",onClick:()=>i(2,t=!0),type:"danger",onClose:!1},{label:"Save",onClick:S,type:"primary"}];async function F(){await z(`folder/${e.id}`,{}),D("folder_deleted",e)}async function S(){await B(`folder/${e.id}`,e),D("folder_updated",e)}function j(){e.name=this.value,i(0,e)}return f.$$set=m=>{"folder"in m&&i(0,e=m.folder),"onClose"in m&&i(1,o=m.onClose)},[e,o,t,n,r,j]}class K extends E{constructor(f){super();N(this,f,J,I,q,{folder:0,onClose:1})}}export default K;
