import{getApi as m}from"../../services/ApiService.js";import{me as u}from"../../services/AuthService.js";import{fastClone as h}from"../../util/Compare.js";import{set as f}from"../../util/Selection.js";export async function getFolders(g=!0,p){const i=await m("folder"),l=await u();i.push({name:"Uncategorized",id:`${l.teamId}:uncategorized`,isUncategorized:!0});let a={},s={},n={};return i.forEach(e=>{p?.(e),s[e.id]=e.parent,n[e.id]=h(e),e.parent||(a[e.id]=e)}),i.forEach(e=>{if(e.parent){let r=e.parent,c=new Set([e.id,r]);for(;r;){if(r=s[r],!r)break;c.add(r)}const d=Array.from(c).map(t=>n[t]).reverse();let o="";d.forEach((t,v)=>{o+=t.id,f(a,o,t),o+=".children."})}}),a}
