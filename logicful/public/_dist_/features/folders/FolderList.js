import{SvelteComponent as I,append as _,attr as y,check_outros as H,create_component as J,destroy_component as K,destroy_each as P,detach as w,element as p,empty as Q,group_outros as T,init as R,insert as F,listen as z,mount_component as U,safe_not_equal as V,set_data as W,space as j,text as X,toggle_class as B,transition_in as b,transition_out as S}from"../../../web_modules/svelte/internal.js";import{subscribeComponent as Y}from"../../event/EventBus.js";import{tick as Z}from"../../../web_modules/svelte.js";function C(l,t,n){const e=l.slice();return e[8]=t[n],e}function x(l){let t;return{c(){t=p("div"),t.innerHTML='<span class="far fa-folder" style="font-size: 1.2em; font-weight: 375;"></span>'},m(n,e){F(n,t,e)},d(n){n&&w(t)}}}function $(l){let t;return{c(){t=p("div"),t.innerHTML='<span class="fas fa-folder-open" style="font-size: 1.2em; font-weight: 375;"></span>'},m(n,e){F(n,t,e)},d(n){n&&w(t)}}}function q(l){let t,n,e,o;function s(...d){return l[6](l[8],...d)}return{c(){t=p("div"),n=p("span"),n.innerHTML='<span class="fas fa-plus"></span>',y(n,"class","icon icon-xs ml-auto")},m(d,r){F(d,t,r),_(t,n),e||(o=z(n,"click",s),e=!0)},p(d,r){l=d},d(d){d&&w(t),e=!1,o()}}}function E(l){let t,n;return t=new D({props:{padding:!0,folders:l[8].children??{},selected:l[1],onSelected:l[2],onNewFolder:l[3]}}),{c(){J(t.$$.fragment)},m(e,o){U(t,e,o),n=!0},p(e,o){const s={};o&1&&(s.folders=e[8].children??{}),o&2&&(s.selected=e[1]),o&4&&(s.onSelected=e[2]),o&8&&(s.onNewFolder=e[3]),t.$set(s)},i(e){if(n)return;b(t.$$.fragment,e),n=!0},o(e){S(t.$$.fragment,e),n=!1},d(e){K(t,e)}}}function A(l){let t,n,e,o,s,d=l[8].name+"",r,i,h,k,f,v,L,M;function O(u,m){return u[8].id===u[1]?$:x}let N=O(l,-1),g=N(l),a=l[8].id===l[1]&&q(l);function G(...u){return l[7](l[8],...u)}let c=l[5][l[8].id]&&E(l);return{c(){t=p("div"),n=p("div"),e=p("button"),g.c(),o=j(),s=p("p"),r=X(d),i=j(),a&&a.c(),h=j(),k=p("div"),c&&c.c(),f=j(),y(s,"class","pl-1 pr-1"),y(e,"class",`group w-full flex items-center pl-2 pr-1 py-2 text-sm leading-5
          font-medium rounded-md bg-white text-gray-600 hover:text-gray-900
          hover:bg-gray-50 focus:outline-none focus:text-gray-900
          focus:bg-gray-50 transition ease-in-out duration-150`),y(t,"class","pt-1"),B(t,"pl-2",l[4])},m(u,m){F(u,t,m),_(t,n),_(n,e),g.m(e,null),_(e,o),_(e,s),_(s,r),_(e,i),a&&a.m(e,null),_(n,h),_(n,k),c&&c.m(k,null),_(t,f),v=!0,L||(M=z(e,"click",G),L=!0)},p(u,m){l=u,N!==(N=O(l,m))&&(g.d(1),g=N(l),g&&(g.c(),g.m(e,o))),(!v||m&1)&&d!==(d=l[8].name+"")&&W(r,d),l[8].id===l[1]?a?a.p(l,m):(a=q(l),a.c(),a.m(e,null)):a&&(a.d(1),a=null),l[5][l[8].id]?c?(c.p(l,m),m&33&&b(c,1)):(c=E(l),c.c(),b(c,1),c.m(k,null)):c&&(T(),S(c,1,1,()=>{c=null}),H()),m&16&&B(t,"pl-2",l[4])},i(u){if(v)return;b(c),v=!0},o(u){S(c),v=!1},d(u){u&&w(t),g.d(),a&&a.d(),c&&c.d(),L=!1,M()}}}function ee(l){let t,n,e=Object.values(l[0]),o=[];for(let d=0;d<e.length;d+=1)o[d]=A(C(l,e,d));const s=d=>S(o[d],1,1,()=>{o[d]=null});return{c(){for(let d=0;d<o.length;d+=1)o[d].c();t=Q()},m(d,r){for(let i=0;i<o.length;i+=1)o[i].m(d,r);F(d,t,r),n=!0},p(d,[r]){if(r&63){e=Object.values(d[0]);let i;for(i=0;i<e.length;i+=1){const h=C(d,e,i);o[i]?(o[i].p(h,r),b(o[i],1)):(o[i]=A(h),o[i].c(),b(o[i],1),o[i].m(t.parentNode,t))}for(T(),i=e.length;i<o.length;i+=1)s(i);H()}},i(d){if(n)return;for(let r=0;r<e.length;r+=1)b(o[r]);n=!0},o(d){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)S(o[r]);n=!1},d(d){P(o,d),d&&w(t)}}}function le(l,t,n){let{folders:e}=t,{selected:o=""}=t,{onSelected:s}=t,{onNewFolder:d}=t,{padding:r=!1}=t,i={};Y("folder_created",async f=>{f&&(await Z(),n(5,i[f]=!0,i))});const h=async f=>{await d(f.id)},k=f=>{if(n(5,i[f.id]=!i[f.id]??!0,i),o===f.id)return;s(f)};return l.$$set=f=>{"folders"in f&&n(0,e=f.folders),"selected"in f&&n(1,o=f.selected),"onSelected"in f&&n(2,s=f.onSelected),"onNewFolder"in f&&n(3,d=f.onNewFolder),"padding"in f&&n(4,r=f.padding)},[e,o,s,d,r,i,h,k]}class D extends I{constructor(l){super();R(this,l,le,ee,V,{folders:0,selected:1,onSelected:2,onNewFolder:3,padding:4})}}export default D;
