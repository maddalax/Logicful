import{SvelteComponent as G,append as v,assign as w,attr as y,check_outros as P,create_component as s,destroy_component as c,detach as b,element as k,empty as R,get_spread_object as j,get_spread_update as S,group_outros as U,init as V,insert as $,mount_component as p,noop as _,safe_not_equal as H,set_data as L,text as F,transition_in as d,transition_out as a}from"../../../../web_modules/svelte/internal.js";import A from"../../../inputs/TextInput.js";import{afterUpdate as q,onMount as B}from"../../../../web_modules/svelte.js";import E from"../../../inputs/ComboBox.js";import{LoadState as N}from"../../../models/LoadState.js";import{FieldValueLoader as I}from"../../../loader/FieldValueLoader.js";import J from"../../../inputs/Address.js";import M from"../../../inputs/FullName.js";import O from"../../../inputs/TextArea.js";import z from"../../../inputs/CheckboxGroup.js";import Y from"../../../inputs/Spacer.js";import x from"../../../inputs/RadioGroup.js";import K from"../../../store/FormStore.js";import Q from"../../../inputs/RichTextDisplay.js";import W from"../../../inputs/Switch.js";import X from"../../../components/DatePicker.js";import{firstNotEmpty as D}from"../../../util/Format.js";import Z from"../../../inputs/FileUpload.js";import ee from"../../../inputs/SectionHeader.js";import{fastEquals as te}from"../../../util/Compare.js";function re(l){let t;return{c(){t=k("div"),y(t,"class","hidden")},m(i,e){$(i,t,e)},p:_,i:_,o:_,d(i){i&&b(t)}}}function ie(l){let t,i,e=JSON.stringify(l[0],null,2)+"",f;return{c(){t=k("p"),i=F("No field found for field. "),f=F(e)},m(r,n){$(r,t,n),v(t,i),v(t,f)},p(r,n){n&1&&e!==(e=JSON.stringify(r[0],null,2)+"")&&L(f,e)},i:_,o:_,d(r){r&&b(t)}}}function fe(l){let t,i;return t=new ee({props:{field:l[0]}}),{c(){s(t.$$.fragment)},m(e,f){p(t,e,f),i=!0},p(e,f){const r={};f&1&&(r.field=e[0]),t.$set(r)},i(e){if(i)return;d(t.$$.fragment,e),i=!0},o(e){a(t.$$.fragment,e),i=!1},d(e){c(t,e)}}}function le(l){let t,i;return t=new M({props:{field:l[0],value:l[4]}}),{c(){s(t.$$.fragment)},m(e,f){p(t,e,f),i=!0},p(e,f){const r={};f&1&&(r.field=e[0]),f&16&&(r.value=e[4]),t.$set(r)},i(e){if(i)return;d(t.$$.fragment,e),i=!0},o(e){a(t.$$.fragment,e),i=!1},d(e){c(t,e)}}}function ne(l){let t,i;return t=new x({props:{field:l[0]}}),{c(){s(t.$$.fragment)},m(e,f){p(t,e,f),i=!0},p(e,f){const r={};f&1&&(r.field=e[0]),t.$set(r)},i(e){if(i)return;d(t.$$.fragment,e),i=!0},o(e){a(t.$$.fragment,e),i=!1},d(e){c(t,e)}}}function oe(l){let t,i;return t=new z({props:{field:l[0]}}),{c(){s(t.$$.fragment)},m(e,f){p(t,e,f),i=!0},p(e,f){const r={};f&1&&(r.field=e[0]),t.$set(r)},i(e){if(i)return;d(t.$$.fragment,e),i=!0},o(e){a(t.$$.fragment,e),i=!1},d(e){c(t,e)}}}function de(l){let t,i;return t=new Z({props:{field:l[0]}}),{c(){s(t.$$.fragment)},m(e,f){p(t,e,f),i=!0},p(e,f){const r={};f&1&&(r.field=e[0]),t.$set(r)},i(e){if(i)return;d(t.$$.fragment,e),i=!0},o(e){a(t.$$.fragment,e),i=!1},d(e){c(t,e)}}}function ae(l){let t;return{c(){t=k("div"),t.innerHTML=`<i class="fas fa-grip-horizontal"></i> 
      <p>You have no fields, drag one from the left sidebar to get started.</p>`,y(t,"class","placeholder")},m(i,e){$(i,t,e)},p:_,i:_,o:_,d(i){i&&b(t)}}}function ue(l){let t,i;const e=[{field:l[0]},l[1]];let f={};for(let r=0;r<e.length;r+=1)f=w(f,e[r]);return t=new X({props:f}),{c(){s(t.$$.fragment)},m(r,n){p(t,r,n),i=!0},p(r,n){const m=n&3?S(e,[n&1&&{field:r[0]},n&2&&j(r[1])]):{};t.$set(m)},i(r){if(i)return;d(t.$$.fragment,r),i=!0},o(r){a(t.$$.fragment,r),i=!1},d(r){c(t,r)}}}function se(l){let t,i;const e=[{field:l[0]},l[1]];let f={};for(let r=0;r<e.length;r+=1)f=w(f,e[r]);return t=new W({props:f}),{c(){s(t.$$.fragment)},m(r,n){p(t,r,n),i=!0},p(r,n){const m=n&3?S(e,[n&1&&{field:r[0]},n&2&&j(r[1])]):{};t.$set(m)},i(r){if(i)return;d(t.$$.fragment,r),i=!0},o(r){a(t.$$.fragment,r),i=!1},d(r){c(t,r)}}}function ce(l){let t,i;return t=new Y({props:{field:l[0]}}),{c(){s(t.$$.fragment)},m(e,f){p(t,e,f),i=!0},p(e,f){const r={};f&1&&(r.field=e[0]),t.$set(r)},i(e){if(i)return;d(t.$$.fragment,e),i=!0},o(e){a(t.$$.fragment,e),i=!1},d(e){c(t,e)}}}function pe(l){let t,i;const e=[{field:l[0]},l[1],{isPreview:!0}];let f={};for(let r=0;r<e.length;r+=1)f=w(f,e[r]);return t=new O({props:f}),{c(){s(t.$$.fragment)},m(r,n){p(t,r,n),i=!0},p(r,n){const m=n&3?S(e,[n&1&&{field:r[0]},n&2&&j(r[1]),e[2]]):{};t.$set(m)},i(r){if(i)return;d(t.$$.fragment,r),i=!0},o(r){a(t.$$.fragment,r),i=!1},d(r){c(t,r)}}}function me(l){let t,i;return t=new Q({props:{field:l[0],isPreview:!0}}),{c(){s(t.$$.fragment)},m(e,f){p(t,e,f),i=!0},p(e,f){const r={};f&1&&(r.field=e[0]),t.$set(r)},i(e){if(i)return;d(t.$$.fragment,e),i=!0},o(e){a(t.$$.fragment,e),i=!1},d(e){c(t,e)}}}function _e(l){let t,i;const e=[{field:l[0]},l[1]];let f={};for(let r=0;r<e.length;r+=1)f=w(f,e[r]);return t=new E({props:f}),{c(){s(t.$$.fragment)},m(r,n){p(t,r,n),i=!0},p(r,n){const m=n&3?S(e,[n&1&&{field:r[0]},n&2&&j(r[1])]):{};t.$set(m)},i(r){if(i)return;d(t.$$.fragment,r),i=!0},o(r){a(t.$$.fragment,r),i=!1},d(r){c(t,r)}}}function ge(l){let t,i;return t=new A({props:{field:l[0],type:"number"}}),{c(){s(t.$$.fragment)},m(e,f){p(t,e,f),i=!0},p(e,f){const r={};f&1&&(r.field=e[0]),t.$set(r)},i(e){if(i)return;d(t.$$.fragment,e),i=!0},o(e){a(t.$$.fragment,e),i=!1},d(e){c(t,e)}}}function be(l){let t,i;return t=new A({props:{field:l[0]}}),{c(){s(t.$$.fragment)},m(e,f){p(t,e,f),i=!0},p(e,f){const r={};f&1&&(r.field=e[0]),t.$set(r)},i(e){if(i)return;d(t.$$.fragment,e),i=!0},o(e){a(t.$$.fragment,e),i=!1},d(e){c(t,e)}}}function $e(l){let t,i;return t=new J({props:{field:l[0],value:l[4]}}),{c(){s(t.$$.fragment)},m(e,f){p(t,e,f),i=!0},p(e,f){const r={};f&1&&(r.field=e[0]),f&16&&(r.value=e[4]),t.$set(r)},i(e){if(i)return;d(t.$$.fragment,e),i=!0},o(e){a(t.$$.fragment,e),i=!1},d(e){c(t,e)}}}function he(l){let t;function i(r,n){return r[3]==="builder"?ve:ke}let e=i(l,-1),f=e(l);return{c(){f.c(),t=R()},m(r,n){f.m(r,n),$(r,t,n)},p(r,n){e===(e=i(r,n))&&f?f.p(r,n):(f.d(1),f=e(r),f&&(f.c(),f.m(t.parentNode,t)))},i:_,o:_,d(r){f.d(r),r&&b(t)}}}function ke(l){let t;return{c(){t=k("div"),y(t,"class","hidden")},m(i,e){$(i,t,e)},p:_,d(i){i&&b(t)}}}function ve(l){let t,i=D(l[0].label,l[0].name)+"",e,f;return{c(){t=k("p"),e=F(i),f=F(` is hidden by rules defined in logic.
        This message is only displayed on this preview.`),y(t,"class","text-gray-700")},m(r,n){$(r,t,n),v(t,e),v(t,f)},p(r,n){n&1&&i!==(i=D(r[0].label,r[0].name)+"")&&L(e,i)},d(r){r&&b(t)}}}function we(l){let t,i,e,f;const r=[he,$e,be,ge,_e,me,pe,ce,se,ue,ae,de,oe,ne,le,fe,ie,re],n=[];function m(o,g){return o[2]?0:o[0].type==="address"?1:o[0].type==="string"?2:o[0].type==="number"?3:o[0].type==="combobox"?4:o[0].type==="block"?5:o[0].type==="block-editor"?6:o[0].type==="spacer"?7:o[0].type==="switch"?8:o[0].type==="date"?9:o[3]==="builder"&&o[0].type==="placeholder"?10:o[0].type==="file"?11:o[0].type==="checkbox-group"?12:o[0].type==="radio-group"?13:o[0].type==="full-name"?14:o[0].type==="section-header"?15:o[3]==="builder"?16:17}return i=m(l,-1),e=n[i]=r[i](l),{c(){t=k("div"),e.c()},m(o,g){$(o,t,g),n[i].m(t,null),f=!0},p(o,[g]){let h=i;i=m(o,g),i===h?n[i].p(o,g):(U(),a(n[h],1,1,()=>{n[h]=null}),P(),e=n[i],e||(e=n[i]=r[i](o),e.c()),d(e,1),e.m(t,null))},i(o){if(f)return;d(e),f=!0},o(o){a(e),f=!1},d(o){o&&b(t),n[i].d()}}}function ye(l,t,i){let{field:e}=t,f=N.NotStarted,r,n,{config:m={}}=t,{hidden:o=!1}=t,{padding:g=!0}=t,{mode:h="builder"}=t;B(C),q(async()=>{e.value&&!te(e.value,n)&&await C()});async function C(){if(n=e.value,(e.value??e.defaultValue)!=null){f=N.Loading;try{const u=new I,T=await u.load(e);i(4,r=T),i(0,e.value=T,e),K.set(e,{value:T,field:"value",fromUser:!1}),f=N.Finished}catch(u){console.error(u),f=N.Failed}}}return l.$$set=u=>{"field"in u&&i(0,e=u.field),"config"in u&&i(1,m=u.config),"hidden"in u&&i(2,o=u.hidden),"padding"in u&&i(5,g=u.padding),"mode"in u&&i(3,h=u.mode)},[e,m,o,h,r,g]}class je extends G{constructor(l){super();V(this,l,ye,we,H,{field:0,config:1,hidden:2,padding:5,mode:3})}}export default je;
