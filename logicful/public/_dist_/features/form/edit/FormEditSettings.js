/* src/features/form/edit/FormEditSettings.svelte generated by Svelte v3.25.1 */
import {
	SvelteComponent,
	attr,
	create_component,
	destroy_component,
	detach,
	element,
	init,
	insert,
	mount_component,
	safe_not_equal,
	set_style,
	space,
	transition_in,
	transition_out
} from "../../../../web_modules/svelte/internal.js";

import Field from "./Field.js";
import { randomString } from "../../../util/Generate.js";
import { onMount } from "../../../../web_modules/svelte.js";
import { subscribe, subscribeComponent } from "../../../event/EventBus.js";
import formStore from "../../../store/FormStore.js";

function create_fragment(ctx) {
	let field0;
	let t0;
	let field1;
	let t1;
	let h2;
	let t3;
	let field2;
	let t4;
	let field3;
	let t5;
	let field4;
	let t6;
	let field5;
	let current;

	field0 = new Field({
			props: {
				field: {
					id: randomString(),
					required: true,
					label: "Form Title",
					value: {
						type: "local",
						value: /*form*/ ctx[0].title
					},
					type: "string",
					configFieldTarget: "title",
					configTarget: "form"
				}
			}
		});

	field1 = new Field({
			props: {
				field: {
					id: randomString(),
					required: true,
					label: "Form Description",
					value: {
						type: "local",
						value: /*form*/ ctx[0].description
					},
					type: "string",
					configFieldTarget: "description",
					configTarget: "form"
				}
			}
		});

	field2 = new Field({
			props: {
				field: {
					id: randomString(),
					type: "switch",
					label: "Disable Summisions",
					value: {
						type: "local",
						value: /*form*/ ctx[0].disableSubmissions ?? false
					},
					configFieldTarget: "disableSubmissions",
					configTarget: "form"
				}
			}
		});

	field3 = new Field({
			props: {
				field: {
					id: randomString(),
					type: "switch",
					label: "Disable after a maximum number of submissions",
					value: {
						type: "local",
						value: /*form*/ ctx[0].maxSubmissions ?? false
					},
					configFieldTarget: "maxSubmissions",
					configTarget: "form"
				}
			}
		});

	field4 = new Field({
			props: {
				field: {
					id: randomString(),
					type: "date",
					required: true,
					label: "Submissions open after date/time",
					value: {
						type: "local",
						value: /*form*/ ctx[0].openDateTime ?? ""
					},
					configFieldTarget: "openDateTime",
					configTarget: "form"
				}
			}
		});

	field5 = new Field({
			props: {
				field: {
					id: randomString(),
					type: "date",
					required: true,
					label: "Submissions close after date/time ",
					value: {
						type: "local",
						value: /*form*/ ctx[0].closeDateTime ?? ""
					},
					configFieldTarget: "closeDateTime",
					configTarget: "form"
				}
			}
		});

	return {
		c() {
			create_component(field0.$$.fragment);
			t0 = space();
			create_component(field1.$$.fragment);
			t1 = space();
			h2 = element("h2");
			h2.textContent = "Form Availability";
			t3 = space();
			create_component(field2.$$.fragment);
			t4 = space();
			create_component(field3.$$.fragment);
			t5 = space();
			create_component(field4.$$.fragment);
			t6 = space();
			create_component(field5.$$.fragment);
			attr(h2, "class", "h5");
			set_style(h2, "padding-top", "2em");
		},
		m(target, anchor) {
			mount_component(field0, target, anchor);
			insert(target, t0, anchor);
			mount_component(field1, target, anchor);
			insert(target, t1, anchor);
			insert(target, h2, anchor);
			insert(target, t3, anchor);
			mount_component(field2, target, anchor);
			insert(target, t4, anchor);
			mount_component(field3, target, anchor);
			insert(target, t5, anchor);
			mount_component(field4, target, anchor);
			insert(target, t6, anchor);
			mount_component(field5, target, anchor);
			current = true;
		},
		p(ctx, [dirty]) {
			const field0_changes = {};

			if (dirty & /*form*/ 1) field0_changes.field = {
				id: randomString(),
				required: true,
				label: "Form Title",
				value: {
					type: "local",
					value: /*form*/ ctx[0].title
				},
				type: "string",
				configFieldTarget: "title",
				configTarget: "form"
			};

			field0.$set(field0_changes);
			const field1_changes = {};

			if (dirty & /*form*/ 1) field1_changes.field = {
				id: randomString(),
				required: true,
				label: "Form Description",
				value: {
					type: "local",
					value: /*form*/ ctx[0].description
				},
				type: "string",
				configFieldTarget: "description",
				configTarget: "form"
			};

			field1.$set(field1_changes);
			const field2_changes = {};

			if (dirty & /*form*/ 1) field2_changes.field = {
				id: randomString(),
				type: "switch",
				label: "Disable Summisions",
				value: {
					type: "local",
					value: /*form*/ ctx[0].disableSubmissions ?? false
				},
				configFieldTarget: "disableSubmissions",
				configTarget: "form"
			};

			field2.$set(field2_changes);
			const field3_changes = {};

			if (dirty & /*form*/ 1) field3_changes.field = {
				id: randomString(),
				type: "switch",
				label: "Disable after a maximum number of submissions",
				value: {
					type: "local",
					value: /*form*/ ctx[0].maxSubmissions ?? false
				},
				configFieldTarget: "maxSubmissions",
				configTarget: "form"
			};

			field3.$set(field3_changes);
			const field4_changes = {};

			if (dirty & /*form*/ 1) field4_changes.field = {
				id: randomString(),
				type: "date",
				required: true,
				label: "Submissions open after date/time",
				value: {
					type: "local",
					value: /*form*/ ctx[0].openDateTime ?? ""
				},
				configFieldTarget: "openDateTime",
				configTarget: "form"
			};

			field4.$set(field4_changes);
			const field5_changes = {};

			if (dirty & /*form*/ 1) field5_changes.field = {
				id: randomString(),
				type: "date",
				required: true,
				label: "Submissions close after date/time ",
				value: {
					type: "local",
					value: /*form*/ ctx[0].closeDateTime ?? ""
				},
				configFieldTarget: "closeDateTime",
				configTarget: "form"
			};

			field5.$set(field5_changes);
		},
		i(local) {
			if (current) return;
			transition_in(field0.$$.fragment, local);
			transition_in(field1.$$.fragment, local);
			transition_in(field2.$$.fragment, local);
			transition_in(field3.$$.fragment, local);
			transition_in(field4.$$.fragment, local);
			transition_in(field5.$$.fragment, local);
			current = true;
		},
		o(local) {
			transition_out(field0.$$.fragment, local);
			transition_out(field1.$$.fragment, local);
			transition_out(field2.$$.fragment, local);
			transition_out(field3.$$.fragment, local);
			transition_out(field4.$$.fragment, local);
			transition_out(field5.$$.fragment, local);
			current = false;
		},
		d(detaching) {
			destroy_component(field0, detaching);
			if (detaching) detach(t0);
			destroy_component(field1, detaching);
			if (detaching) detach(t1);
			if (detaching) detach(h2);
			if (detaching) detach(t3);
			destroy_component(field2, detaching);
			if (detaching) detach(t4);
			destroy_component(field3, detaching);
			if (detaching) detach(t5);
			destroy_component(field4, detaching);
			if (detaching) detach(t6);
			destroy_component(field5, detaching);
		}
	};
}

function instance($$self, $$props, $$invalidate) {
	
	let { form } = $$props;

	subscribeComponent("form_loaded", updatedForm => {
		$$invalidate(0, form = updatedForm);
	});

	subscribeComponent("form_updated", updatedForm => {
		$$invalidate(0, form = updatedForm);
	});

	$$self.$$set = $$props => {
		if ("form" in $$props) $$invalidate(0, form = $$props.form);
	};

	return [form];
}

class FormEditSettings extends SvelteComponent {
	constructor(options) {
		super();
		init(this, options, instance, create_fragment, safe_not_equal, { form: 0 });
	}
}

export default FormEditSettings;