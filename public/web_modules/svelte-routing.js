import{S as D,i as U,s as M,e as x,u as B,f as y,g as w,h as I,j as P,o as pe,k as J,l as q,m as T,n as H,p as K,q as j,d as me,r as L,v as V,w as X,x as Z,y as $,z as ee,A as te,B as de,C as oe,D as ge,c as be}from"./common/index-8f6da9e5.js";import{w as N,d as _e}from"./common/index-fa9711c0.js";const O={},A={};function z(e){return{...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}}function ye(e,t){const n=[];let o=z(e);return{get location(){return o},listen(r){n.push(r);const a=()=>{o=z(e),r({location:o,action:"POP"})};return e.addEventListener("popstate",a),()=>{e.removeEventListener("popstate",a);const l=n.indexOf(r);n.splice(l,1)}},navigate(r,{state:a,replace:l=!1}={}){a={...a,key:Date.now()+""};try{l?e.history.replaceState(a,null,r):e.history.pushState(a,null,r)}catch(c){e.location[l?"replace":"assign"](r)}o=z(e),n.forEach(c=>c({location:o,action:"PUSH"}))}}}function ke(e="/"){let t=0;const n=[{pathname:e,search:""}],o=[];return{get location(){return n[t]},addEventListener(r,a){},removeEventListener(r,a){},history:{get entries(){return n},get index(){return t},get state(){return o[t]},pushState(r,a,l){const[c,s=""]=l.split("?");t++,n.push({pathname:c,search:s}),o.push(r)},replaceState(r,a,l){const[c,s=""]=l.split("?");n[t]={pathname:c,search:s},o[t]=r}}}}const Re=Boolean(typeof window!="undefined"&&window.document&&window.document.createElement),G=ye(Re?window:ke()),{navigate:Y}=G,ne=/^:(.+)/,re=4,we=3,ve=2,Se=1,Ce=1;function Q(e,t){return e.substr(0,t.length)===t}function Pe(e){return e===""}function Ie(e){return ne.test(e)}function ae(e){return e[0]==="*"}function E(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function W(e){return e.replace(/(^\/+|\/+$)/g,"")}function Ee(e,t){const n=e.default?0:E(e.path).reduce((o,r)=>(o+=re,Pe(r)?o+=Ce:Ie(r)?o+=ve:ae(r)?o-=re+Se:o+=we,o),0);return{route:e,score:n,index:t}}function Te(e){return e.map(Ee).sort((t,n)=>t.score<n.score?1:t.score>n.score?-1:t.index-n.index)}function se(e,t){let n,o;const[r]=t.split("?"),a=E(r),l=a[0]==="",c=Te(e);for(let s=0,i=c.length;s<i;s++){const h=c[s].route;let _=!1;if(h.default){o={route:h,params:{},uri:t};continue}const b=E(h.path),m={},d=Math.max(a.length,b.length);let p=0;for(;p<d;p++){const f=b[p],k=a[p];if(f!==void 0&&ae(f)){const S=f==="*"?"*":f.slice(1);m[S]=a.slice(p).map(decodeURIComponent).join("/");break}if(k===void 0){_=!0;break}let v=ne.exec(f);if(v&&!l){const S=decodeURIComponent(k);m[v[1]]=S}else if(f!==k){_=!0;break}}if(!_){n={route:h,params:m,uri:"/"+a.slice(0,p).join("/")};break}}return n||o||null}function je(e,t){return se([e],t)}function F(e,t){return e+(t?`?${t}`:"")}function Le(e,t){if(Q(e,"/"))return e;const[n,o]=e.split("?"),[r]=t.split("?"),a=E(n),l=E(r);if(a[0]==="")return F(r,o);if(!Q(a[0],".")){const i=l.concat(a).join("/");return F((r==="/"?"":"/")+i,o)}const c=l.concat(a),s=[];return c.forEach(i=>{i===".."?s.pop():i!=="."&&s.push(i)}),F("/"+s.join("/"),o)}function ie(e,t){return`${W(t==="/"?e:`${W(e)}/${W(t)}`)}/`}function ue(e){return!e.defaultPrevented&&e.button===0&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ne(e){const t=location.host;return e.host==t||e.href.indexOf(`https://${t}`)===0||e.href.indexOf(`http://${t}`)===0}function Oe(e){let t;const n=e[6].default,o=x(n,e,e[5],null);return{c(){o&&o.c()},m(r,a){o&&o.m(r,a),t=!0},p(r,[a]){o&&(o.p&&a&32&&B(o,n,r,r[5],a,null,null))},i(r){if(t)return;y(o,r),t=!0},o(r){w(o,r),t=!1},d(r){o&&o.d(r)}}}function Ae(e,t,n){let o,r,a,{$$slots:l={},$$scope:c}=t,{basepath:s="/"}=t,{url:i=null}=t;const h=I(O),_=I(A),b=N([]);P(e,b,u=>n(10,a=u));const m=N(null);let d=!1;const p=h||N(i?{pathname:i}:G.location);P(e,p,u=>n(9,r=u));const f=_?_.routerBase:N({path:s,uri:s});P(e,f,u=>n(8,o=u));const k=_e([f,m],([u,g])=>{if(g===null)return u;const{path:R}=u,{route:C,uri:he}=g,fe=C.default?R:C.path.replace(/\*.*$/,"");return{path:fe,uri:he}});function v(u){const{path:g}=o;let{path:R}=u;if(u._path=R,u.path=ie(g,R),typeof window=="undefined"){if(d)return;const C=je(u,r.pathname);C&&(m.set(C),d=!0)}else b.update(C=>(C.push(u),C))}function S(u){b.update(g=>{const R=g.indexOf(u);return g.splice(R,1),g})}return h||(pe(()=>{const u=G.listen(g=>{p.set(g.location)});return u}),J(O,p)),J(A,{activeRoute:m,base:f,routerBase:k,registerRoute:v,unregisterRoute:S}),e.$$set=u=>{"basepath"in u&&n(3,s=u.basepath),"url"in u&&n(4,i=u.url),"$$scope"in u&&n(5,c=u.$$scope)},e.$$.update=()=>{if(e.$$.dirty&256){const{path:u}=o;b.update(g=>(g.forEach(R=>R.path=ie(u,R._path)),g))}if(e.$$.dirty&1536){const u=se(a,r.pathname);m.set(u)}},[b,p,f,s,i,c,l]}class De extends D{constructor(e){super();U(this,e,Ae,Oe,M,{basepath:3,url:4})}}const Ue=e=>({params:e&2,location:e&16}),ce=e=>({params:e[1],location:e[4]});function le(e){let t,n,o,r;const a=[xe,Me],l=[];function c(s,i){return s[0]!==null?0:1}return t=c(e),n=l[t]=a[t](e),{c(){n.c(),o=q()},m(s,i){l[t].m(s,i),T(s,o,i),r=!0},p(s,i){let h=t;t=c(s),t===h?l[t].p(s,i):(H(),w(l[h],1,1,()=>{l[h]=null}),K(),n=l[t],n||(n=l[t]=a[t](s),n.c()),y(n,1),n.m(o.parentNode,o))},i(s){if(r)return;y(n),r=!0},o(s){w(n),r=!1},d(s){l[t].d(s),s&&j(o)}}}function Me(e){let t;const n=e[10].default,o=x(n,e,e[9],ce);return{c(){o&&o.c()},m(r,a){o&&o.m(r,a),t=!0},p(r,a){o&&(o.p&&a&530&&B(o,n,r,r[9],a,Ue,ce))},i(r){if(t)return;y(o,r),t=!0},o(r){w(o,r),t=!1},d(r){o&&o.d(r)}}}function xe(e){let t,n,o;const r=[{location:e[4]},e[1],e[2]];var a=e[0];function l(c){let s={};for(let i=0;i<r.length;i+=1)s=L(s,r[i]);return{props:s}}return a&&(t=new a(l())),{c(){t&&X(t.$$.fragment),n=q()},m(c,s){t&&Z(t,c,s),T(c,n,s),o=!0},p(c,s){const i=s&22?$(r,[s&16&&{location:c[4]},s&2&&ee(c[1]),s&4&&ee(c[2])]):{};if(a!==(a=c[0])){if(t){H();const h=t;w(h.$$.fragment,1,0,()=>{te(h,1)}),K()}a?(t=new a(l()),X(t.$$.fragment),y(t.$$.fragment,1),Z(t,n.parentNode,n)):t=null}else a&&t.$set(i)},i(c){if(o)return;t&&y(t.$$.fragment,c),o=!0},o(c){t&&w(t.$$.fragment,c),o=!1},d(c){c&&j(n),t&&te(t,c)}}}function Be(e){let t,n,o=e[3]!==null&&e[3].route===e[7]&&le(e);return{c(){o&&o.c(),t=q()},m(r,a){o&&o.m(r,a),T(r,t,a),n=!0},p(r,[a]){r[3]!==null&&r[3].route===r[7]?o?(o.p(r,a),a&8&&y(o,1)):(o=le(r),o.c(),y(o,1),o.m(t.parentNode,t)):o&&(H(),w(o,1,1,()=>{o=null}),K())},i(r){if(n)return;y(o),n=!0},o(r){w(o),n=!1},d(r){o&&o.d(r),r&&j(t)}}}function qe(e,t,n){let o,r,{$$slots:a={},$$scope:l}=t,{path:c=""}=t,{component:s=null}=t;const{registerRoute:i,unregisterRoute:h,activeRoute:_}=I(A);P(e,_,f=>n(3,o=f));const b=I(O);P(e,b,f=>n(4,r=f));const m={path:c,default:c===""};let d={},p={};return i(m),typeof window!="undefined"&&me(()=>{h(m)}),e.$$set=f=>{n(13,t=L(L({},t),V(f))),"path"in f&&n(8,c=f.path),"component"in f&&n(0,s=f.component),"$$scope"in f&&n(9,l=f.$$scope)},e.$$.update=()=>{e.$$.dirty&8&&(o&&o.route===m&&n(1,d=o.params));{const{path:f,component:k,...v}=t;n(2,p=v)}},t=V(t),[s,d,p,o,r,_,b,m,c,l,a]}class He extends D{constructor(e){super();U(this,e,qe,Be,M,{path:8,component:0})}}function Ke(e){let t,n,o,r;const a=e[11].default,l=x(a,e,e[10],null);let c=[{href:e[0]},{"aria-current":e[2]},e[1]],s={};for(let i=0;i<c.length;i+=1)s=L(s,c[i]);return{c(){t=de("a"),l&&l.c(),oe(t,s)},m(i,h){T(i,t,h),l&&l.m(t,null),n=!0,o||(r=ge(t,"click",e[5]),o=!0)},p(i,[h]){l&&(l.p&&h&1024&&B(l,a,i,i[10],h,null,null)),oe(t,s=$(c,[(!n||h&1)&&{href:i[0]},(!n||h&4)&&{"aria-current":i[2]},h&2&&i[1]]))},i(i){if(n)return;y(l,i),n=!0},o(i){w(l,i),n=!1},d(i){i&&j(t),l&&l.d(i),o=!1,r()}}}function ze(e,t,n){let o,r,{$$slots:a={},$$scope:l}=t,{to:c="#"}=t,{replace:s=!1}=t,{state:i={}}=t,{getProps:h=()=>({})}=t;const{base:_}=I(A);P(e,_,u=>n(14,o=u));const b=I(O);P(e,b,u=>n(15,r=u));const m=be();let d,p,f,k;function v(u){if(m("click",u),ue(u)){u.preventDefault();const g=r.pathname===d||s;Y(d,{state:i,replace:g})}}e.$$set=u=>{"to"in u&&n(6,c=u.to),"replace"in u&&n(7,s=u.replace),"state"in u&&n(8,i=u.state),"getProps"in u&&n(9,h=u.getProps),"$$scope"in u&&n(10,l=u.$$scope)};let S;return e.$$.update=()=>{e.$$.dirty&16448&&n(0,d=c==="/"?o.uri:Le(c,o.uri)),e.$$.dirty&32769&&n(12,p=Q(r.pathname,d)),e.$$.dirty&32769&&n(13,f=d===r.pathname),e.$$.dirty&8192&&n(2,S=f?"page":void 0),e.$$.dirty&45569&&n(1,k=h({location:r,href:d,isPartiallyCurrent:p,isCurrent:f}))},[d,k,S,_,b,v,c,s,i,h,l,a]}class Ge extends D{constructor(e){super();U(this,e,ze,Ke,M,{to:6,replace:7,state:8,getProps:9})}}function Ye(e){function t(n){const o=n.currentTarget;o.target===""&&Ne(o)&&ue(n)&&(n.preventDefault(),Y(o.pathname+o.search,{replace:o.hasAttribute("replace")}))}return e.addEventListener("click",t),{destroy(){e.removeEventListener("click",t)}}}export{Ge as Link,He as Route,De as Router,Ye as link,Y as navigate};
