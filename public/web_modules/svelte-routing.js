import{n as T,s as N,e as dt,r as bt,i as gt,S as M,f as q,g as B,u as H,h as _,j as w,k as I,l as P,o as yt,m as X,p as G,q as O,v as K,w as z,x as A,d as _t,y as D,z as Z,A as $,B as tt,C as et,D as nt,E as ot,F as kt,G as rt,H as Rt,c as wt}from"./common/index-8b5289af.js";const E=[];function vt(t,e){return{subscribe:j(t,e).subscribe}}function j(t,e=T){let o;const n=[];function r(u){if(N(t,u)&&(t=u,o)){const i=!E.length;for(let s=0;s<n.length;s+=1){const h=n[s];h[1](),E.push(h,t)}if(i){for(let s=0;s<E.length;s+=2)E[s][0](E[s+1]);E.length=0}}}function a(u){r(u(t))}function c(u,i=T){const s=[u,i];return n.push(s),n.length===1&&(o=e(r)||T),u(t),()=>{const h=n.indexOf(s);h!==-1&&n.splice(h,1),n.length===0&&(o(),o=null)}}return{set:r,update:a,subscribe:c}}function St(t,e,o){const n=!Array.isArray(t),r=n?[t]:t,a=e.length<2;return vt(o,c=>{let u=!1;const i=[];let s=0,h=T;const g=()=>{if(s)return;h();const p=e(n?i[0]:i,c);a?c(p):h=gt(p)?p:T},b=r.map((p,m)=>dt(p,d=>{i[m]=d,s&=~(1<<m),u&&g()},()=>{s|=1<<m}));return u=!0,g(),function(){bt(b),h()}})}const U={},x={};function W(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}function Ct(t,e){const o=[];let n=W(t);return{get location(){return n},listen(r){o.push(r);const a=()=>{n=W(t),r({location:n,action:"POP"})};return t.addEventListener("popstate",a),()=>{t.removeEventListener("popstate",a);const c=o.indexOf(r);o.splice(c,1)}},navigate(r,{state:a,replace:c=!1}={}){a={...a,key:Date.now()+""};try{c?t.history.replaceState(a,null,r):t.history.pushState(a,null,r)}catch(u){t.location[c?"replace":"assign"](r)}n=W(t),o.forEach(u=>u({location:n,action:"PUSH"}))}}}function Pt(t="/"){let e=0;const o=[{pathname:t,search:""}],n=[];return{get location(){return o[e]},addEventListener(r,a){},removeEventListener(r,a){},history:{get entries(){return o},get index(){return e},get state(){return n[e]},pushState(r,a,c){const[u,i=""]=c.split("?");e++,o.push({pathname:u,search:i}),n.push(r)},replaceState(r,a,c){const[u,i=""]=c.split("?");o[e]={pathname:u,search:i},n[e]=r}}}}const It=Boolean(typeof window!="undefined"&&window.document&&window.document.createElement),Y=Ct(It?window:Pt()),{navigate:F}=Y,st=/^:(.+)/,at=4,Et=3,Tt=2,jt=1,Lt=1;function Q(t,e){return t.substr(0,e.length)===e}function Nt(t){return t===""}function Ot(t){return st.test(t)}function it(t){return t[0]==="*"}function L(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function J(t){return t.replace(/(^\/+|\/+$)/g,"")}function At(t,e){const o=t.default?0:L(t.path).reduce((n,r)=>(n+=at,Nt(r)?n+=Lt:Ot(r)?n+=Tt:it(r)?n-=at+jt:n+=Et,n),0);return{route:t,score:o,index:e}}function Dt(t){return t.map(At).sort((e,o)=>e.score<o.score?1:e.score>o.score?-1:e.index-o.index)}function ut(t,e){let o,n;const[r]=e.split("?"),a=L(r),c=a[0]==="",u=Dt(t);for(let i=0,s=u.length;i<s;i++){const h=u[i].route;let g=!1;if(h.default){n={route:h,params:{},uri:e};continue}const b=L(h.path),p={},m=Math.max(a.length,b.length);let d=0;for(;d<m;d++){const f=b[d],k=a[d];if(f!==void 0&&it(f)){const S=f==="*"?"*":f.slice(1);p[S]=a.slice(d).map(decodeURIComponent).join("/");break}if(k===void 0){g=!0;break}let v=st.exec(f);if(v&&!c){const S=decodeURIComponent(k);p[v[1]]=S}else if(f!==k){g=!0;break}}if(!g){o={route:h,params:p,uri:"/"+a.slice(0,d).join("/")};break}}return o||n||null}function Ut(t,e){return ut([t],e)}function V(t,e){return t+(e?`?${e}`:"")}function xt(t,e){if(Q(t,"/"))return t;const[o,n]=t.split("?"),[r]=e.split("?"),a=L(o),c=L(r);if(a[0]==="")return V(r,n);if(!Q(a[0],".")){const s=c.concat(a).join("/");return V((r==="/"?"":"/")+s,n)}const u=c.concat(a),i=[];return u.forEach(s=>{s===".."?i.pop():s!=="."&&i.push(s)}),V("/"+i.join("/"),n)}function ct(t,e){return`${J(e==="/"?t:`${J(t)}/${J(e)}`)}/`}function lt(t){return!t.defaultPrevented&&t.button===0&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Mt(t){const e=location.host;return t.host==e||t.href.indexOf(`https://${e}`)===0||t.href.indexOf(`http://${e}`)===0}function qt(t){let e;const o=t[6].default,n=B(o,t,t[5],null);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,[a]){n&&(n.p&&a&32&&H(n,o,r,r[5],a,null,null))},i(r){if(e)return;_(n,r),e=!0},o(r){w(n,r),e=!1},d(r){n&&n.d(r)}}}function Bt(t,e,o){let n,r,a,{$$slots:c={},$$scope:u}=e,{basepath:i="/"}=e,{url:s=null}=e;const h=I(U),g=I(x),b=j([]);P(t,b,l=>o(10,a=l));const p=j(null);let m=!1;const d=h||j(s?{pathname:s}:Y.location);P(t,d,l=>o(9,r=l));const f=g?g.routerBase:j({path:i,uri:i});P(t,f,l=>o(8,n=l));const k=St([f,p],([l,y])=>{if(y===null)return l;const{path:R}=l,{route:C,uri:pt}=y,mt=C.default?R:C.path.replace(/\*.*$/,"");return{path:mt,uri:pt}});function v(l){const{path:y}=n;let{path:R}=l;if(l._path=R,l.path=ct(y,R),typeof window=="undefined"){if(m)return;const C=Ut(l,r.pathname);C&&(p.set(C),m=!0)}else b.update(C=>(C.push(l),C))}function S(l){b.update(y=>{const R=y.indexOf(l);return y.splice(R,1),y})}return h||(yt(()=>{const l=Y.listen(y=>{d.set(y.location)});return l}),X(U,d)),X(x,{activeRoute:p,base:f,routerBase:k,registerRoute:v,unregisterRoute:S}),t.$$set=l=>{"basepath"in l&&o(3,i=l.basepath),"url"in l&&o(4,s=l.url),"$$scope"in l&&o(5,u=l.$$scope)},t.$$.update=()=>{if(t.$$.dirty&256){const{path:l}=n;b.update(y=>(y.forEach(R=>R.path=ct(l,R._path)),y))}if(t.$$.dirty&1536){const l=ut(a,r.pathname);p.set(l)}},[b,d,f,i,s,u,c]}class Ht extends M{constructor(t){super();q(this,t,Bt,qt,N,{basepath:3,url:4})}}const Gt=t=>({params:t&2,location:t&16}),ht=t=>({params:t[1],location:t[4]});function ft(t){let e,o,n,r;const a=[zt,Kt],c=[];function u(i,s){return i[0]!==null?0:1}return e=u(t),o=c[e]=a[e](t),{c(){o.c(),n=G()},m(i,s){c[e].m(i,s),O(i,n,s),r=!0},p(i,s){let h=e;e=u(i),e===h?c[e].p(i,s):(K(),w(c[h],1,1,()=>{c[h]=null}),z(),o=c[e],o||(o=c[e]=a[e](i),o.c()),_(o,1),o.m(n.parentNode,n))},i(i){if(r)return;_(o),r=!0},o(i){w(o),r=!1},d(i){c[e].d(i),i&&A(n)}}}function Kt(t){let e;const o=t[10].default,n=B(o,t,t[9],ht);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&(n.p&&a&530&&H(n,o,r,r[9],a,Gt,ht))},i(r){if(e)return;_(n,r),e=!0},o(r){w(n,r),e=!1},d(r){n&&n.d(r)}}}function zt(t){let e,o,n;const r=[{location:t[4]},t[1],t[2]];var a=t[0];function c(u){let i={};for(let s=0;s<r.length;s+=1)i=D(i,r[s]);return{props:i}}return a&&(e=new a(c())),{c(){e&&$(e.$$.fragment),o=G()},m(u,i){e&&tt(e,u,i),O(u,o,i),n=!0},p(u,i){const s=i&22?et(r,[i&16&&{location:u[4]},i&2&&nt(u[1]),i&4&&nt(u[2])]):{};if(a!==(a=u[0])){if(e){K();const h=e;w(h.$$.fragment,1,0,()=>{ot(h,1)}),z()}a?(e=new a(c()),$(e.$$.fragment),_(e.$$.fragment,1),tt(e,o.parentNode,o)):e=null}else a&&e.$set(s)},i(u){if(n)return;e&&_(e.$$.fragment,u),n=!0},o(u){e&&w(e.$$.fragment,u),n=!1},d(u){u&&A(o),e&&ot(e,u)}}}function Wt(t){let e,o,n=t[3]!==null&&t[3].route===t[7]&&ft(t);return{c(){n&&n.c(),e=G()},m(r,a){n&&n.m(r,a),O(r,e,a),o=!0},p(r,[a]){r[3]!==null&&r[3].route===r[7]?n?(n.p(r,a),a&8&&_(n,1)):(n=ft(r),n.c(),_(n,1),n.m(e.parentNode,e)):n&&(K(),w(n,1,1,()=>{n=null}),z())},i(r){if(o)return;_(n),o=!0},o(r){w(n),o=!1},d(r){n&&n.d(r),r&&A(e)}}}function Yt(t,e,o){let n,r,{$$slots:a={},$$scope:c}=e,{path:u=""}=e,{component:i=null}=e;const{registerRoute:s,unregisterRoute:h,activeRoute:g}=I(x);P(t,g,f=>o(3,n=f));const b=I(U);P(t,b,f=>o(4,r=f));const p={path:u,default:u===""};let m={},d={};return s(p),typeof window!="undefined"&&_t(()=>{h(p)}),t.$$set=f=>{o(13,e=D(D({},e),Z(f))),"path"in f&&o(8,u=f.path),"component"in f&&o(0,i=f.component),"$$scope"in f&&o(9,c=f.$$scope)},t.$$.update=()=>{t.$$.dirty&8&&(n&&n.route===p&&o(1,m=n.params));{const{path:f,component:k,...v}=e;o(2,d=v)}},e=Z(e),[i,m,d,n,r,g,b,p,u,c,a]}class Ft extends M{constructor(t){super();q(this,t,Yt,Wt,N,{path:8,component:0})}}function Qt(t){let e,o,n,r;const a=t[11].default,c=B(a,t,t[10],null);let u=[{href:t[0]},{"aria-current":t[2]},t[1]],i={};for(let s=0;s<u.length;s+=1)i=D(i,u[s]);return{c(){e=kt("a"),c&&c.c(),rt(e,i)},m(s,h){O(s,e,h),c&&c.m(e,null),o=!0,n||(r=Rt(e,"click",t[5]),n=!0)},p(s,[h]){c&&(c.p&&h&1024&&H(c,a,s,s[10],h,null,null)),rt(e,i=et(u,[(!o||h&1)&&{href:s[0]},(!o||h&4)&&{"aria-current":s[2]},h&2&&s[1]]))},i(s){if(o)return;_(c,s),o=!0},o(s){w(c,s),o=!1},d(s){s&&A(e),c&&c.d(s),n=!1,r()}}}function Jt(t,e,o){let n,r,{$$slots:a={},$$scope:c}=e,{to:u="#"}=e,{replace:i=!1}=e,{state:s={}}=e,{getProps:h=()=>({})}=e;const{base:g}=I(x);P(t,g,l=>o(14,n=l));const b=I(U);P(t,b,l=>o(15,r=l));const p=wt();let m,d,f,k;function v(l){if(p("click",l),lt(l)){l.preventDefault();const y=r.pathname===m||i;F(m,{state:s,replace:y})}}t.$$set=l=>{"to"in l&&o(6,u=l.to),"replace"in l&&o(7,i=l.replace),"state"in l&&o(8,s=l.state),"getProps"in l&&o(9,h=l.getProps),"$$scope"in l&&o(10,c=l.$$scope)};let S;return t.$$.update=()=>{t.$$.dirty&16448&&o(0,m=u==="/"?n.uri:xt(u,n.uri)),t.$$.dirty&32769&&o(12,d=Q(r.pathname,m)),t.$$.dirty&32769&&o(13,f=m===r.pathname),t.$$.dirty&8192&&o(2,S=f?"page":void 0),t.$$.dirty&45569&&o(1,k=h({location:r,href:m,isPartiallyCurrent:d,isCurrent:f}))},[m,k,S,g,b,v,u,i,s,h,c,a]}class Vt extends M{constructor(t){super();q(this,t,Jt,Qt,N,{to:6,replace:7,state:8,getProps:9})}}function Xt(t){function e(o){const n=o.currentTarget;n.target===""&&Mt(n)&&lt(o)&&(o.preventDefault(),F(n.pathname+n.search,{replace:n.hasAttribute("replace")}))}return t.addEventListener("click",e),{destroy(){t.removeEventListener("click",e)}}}export{Vt as Link,Ft as Route,Ht as Router,Xt as link,F as navigate};
